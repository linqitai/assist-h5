(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7aea7c60"],{"34d2":function(e,a,r){"use strict";r.r(a);var s=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",{staticClass:"myInfo"},[r("m-header",[r("i",{staticClass:"leftBox iconfont iconfont-left-arrow",on:{click:e.back}}),r("div",{staticClass:"text"},[e._v(e._s(e.$route.name))]),r("i",{staticClass:"iconfont iconfont-question rightBox icon",on:{click:e.showTip}})]),1!=e.userInfo.actived?r("div",{staticClass:"notRealName"},[r("div",{staticClass:"flexRealName paddingWing lineHeight textCenter"},[e._v(e._s(e.getActiveStatus(e.userInfo.actived)))]),-1==e.userInfo.actived?r("div",{staticClass:"flexRealName margT20"},[r("van-button",{attrs:{color:"linear-gradient(to right, #ffae00 , #ff8400)",size:"normal",block:!0,to:"realName"}},[e._v("去实名")])],1):e._e(),2==e.userInfo.actived?r("div",{staticClass:"flexRealName margT20"},[r("van-button",{attrs:{color:"linear-gradient(to right, #ffae00 , #ff8400)",size:"normal",block:!0,to:"realName"}},[e._v("去修改")])],1):e._e()]):e._e(),1==e.userInfo.actived?r("div",{staticClass:"items"},[e.userInfo.isAgent?r("div",{staticClass:"my-cell"},[r("div",{staticClass:"flex1"},[e._v(" 代理 ")]),r("div",{staticClass:"flex2"},[r("span",{staticClass:"ellipsis"},[e._v(e._s(e._f("agentType")(e.userInfo.isAgent)))])])]):e._e(),r("div",{staticClass:"my-cell"},[r("div",{staticClass:"flex1"},[e._v(" 级别 ")]),r("div",{staticClass:"flex2"},[r("span",{staticClass:"ellipsis"},[e._v(e._s(e._f("getUserType")(e.userInfo.level)))])])]),r("div",{staticClass:"my-cell",on:{click:function(a){return e.update("nickName")}}},[r("div",{staticClass:"flex1"},[e._v(" 昵称 ")]),r("div",{staticClass:"flex2"},[r("span",{staticClass:"ellipsis"},[e._v(e._s(e.userInfo.nickName))]),r("i",{staticClass:"iconfont iconfont-right-arrow2"})])]),r("div",{staticClass:"my-cell"},[r("div",{staticClass:"flex1"},[e._v(" 真实姓名 ")]),r("div",{staticClass:"flex2"},[r("span",{staticClass:"ellipsis"},[e._v(e._s(e.userInfo.realName))])])]),r("div",{staticClass:"my-cell"},[r("div",{staticClass:"flex1"},[e._v(" 手机号 ")]),r("div",{staticClass:"flex2"},[r("span",{staticClass:"ellipsis"},[e._v(e._s(e.userInfo.mobilePhone))])])]),r("div",{staticClass:"my-cell",on:{click:function(a){return e.update("wechartNum")}}},[r("div",{staticClass:"flex1"},[e._v(" 微信号 ")]),r("div",{staticClass:"flex2"},[r("span",{staticClass:"ellipsis"},[e._v(e._s(e.userInfo.wechartNum))]),r("i",{staticClass:"iconfont iconfont-right-arrow2"})])]),r("div",{staticClass:"my-cell",on:{click:function(a){return e.update("alipayNum")}}},[r("div",{staticClass:"flex1"},[e._v(" 支付宝号 ")]),r("div",{staticClass:"flex2"},[r("span",{staticClass:"ellipsis"},[e._v(e._s(e.userInfo.alipayNum))]),r("i",{staticClass:"iconfont iconfont-right-arrow2"})])]),r("div",{staticClass:"my-cell"},[r("div",{staticClass:"flex1"},[e._v(" 区块地址 ")]),r("div",{staticClass:"flex2"},[r("div",{staticClass:"value"},[r("div",{staticClass:"f-12 blockAddress right",on:{click:function(a){return e.handleCopy(e.userInfo.blockAddress,a)}}},[e._v(e._s(e.userInfo.blockAddress))]),r("span",{staticClass:"copy right",on:{click:function(a){return e.handleCopy(e.userInfo.blockAddress,a)}}},[e._v("复制")])])])]),r("div",{staticClass:"my-cell",on:{click:function(a){return e.updatePassword("loginPassword")}}},[r("div",{staticClass:"flex1"},[e._v(" 登录密码 ")]),e._m(0)]),r("div",{staticClass:"my-cell",on:{click:function(a){return e.updatePassword("securityPassword")}}},[r("div",{staticClass:"flex1"},[e._v(" 安全密码 ")]),e._m(1)])]):e._e(),r("div",{staticClass:"fixedBottom paddingWing"},[r("van-button",{attrs:{type:"info",size:"normal",color:"linear-gradient(to right, #ffae00, #ff8400)",block:!0},on:{click:e.logout}},[e._v("安全退出")]),r("div",{staticClass:"placeholderLine10"})],1),r("van-dialog",{attrs:{title:"问题小帮手",confirmButtonText:"知道了"},model:{value:e.showTipModel,callback:function(a){e.showTipModel=a},expression:"showTipModel"}},[r("div",{staticClass:"paddingWing f-12 lineHeight textJustify tip4model2 textIndent"},[r("div",[e._v(" 1.实名资料是用户之间交换矿石时的凭据信息，提交实名后需待客服审核，每个账号只有3次实名的机会，请认真填写 ")]),r("div",{staticClass:"placeholderLine4"})])]),r("div",{staticClass:"updateInfo"},[r("van-action-sheet",{attrs:{title:e.titleName},model:{value:e.showUpdateModel,callback:function(a){e.showUpdateModel=a},expression:"showUpdateModel"}},[r("div",{staticClass:"placeholderLine40"}),r("van-cell-group",[r("van-field",{attrs:{required:"",clearable:"",label:"身份证号","right-icon":"question-o",placeholder:e.errorHint["idCard"],type:"text",maxlength:"18","error-message":e.errorInfo["idCard"]},on:{"click-right-icon":function(a){return e.$toast(e.errorHint["idCard"])},blur:function(a){return e.validate("idCard")}},model:{value:e.form["idCard"],callback:function(a){e.$set(e.form,"idCard",a)},expression:"form['idCard']"}}),r("van-field",{attrs:{required:"",clearable:"",label:e.label,"right-icon":"question-o",placeholder:e.errorHint[e.flag],"error-message":e.errorInfo[e.flag]},on:{"click-right-icon":function(a){return e.$toast(e.errorHint[e.flag])},blur:function(a){return e.validate(e.flag)}},model:{value:e.form[e.flag],callback:function(a){e.$set(e.form,e.flag,a)},expression:"form[flag]"}}),r("van-field",{attrs:{required:"",clearable:"",label:"安全密码","right-icon":"question-o",placeholder:"请填写安全密码",maxlength:"20",type:"password","error-message":e.errorInfo["safePassword"]},on:{"click-right-icon":function(a){return e.$toast(e.errorHint["safePassword"])},blur:function(a){return e.validate("safePassword")}},model:{value:e.form["safePassword"],callback:function(a){e.$set(e.form,"safePassword",a)},expression:"form['safePassword']"}})],1),r("div",{staticClass:"placeholderLine10"}),r("div",{staticClass:"placeholderLine40"}),r("div",{staticClass:"modelTip"},[e._v("系统提示：修改信息需使用10个帮扶券")]),r("div",{staticClass:"sureAppointBtnBox"},[r("van-button",{attrs:{color:"linear-gradient(to right, #ffae00 , #ff8400)",size:"normal",block:!0,loading:e.update1Loading},on:{click:function(a){return e.sureUpdate("update1")}}},[e._v("确 认")])],1)],1)],1),r("van-action-sheet",{attrs:{title:e.titleName},model:{value:e.showUpdatePasswordModel,callback:function(a){e.showUpdatePasswordModel=a},expression:"showUpdatePasswordModel"}},[r("div",{staticClass:"placeholderLine40"}),r("div",{staticClass:"update2"},[r("van-cell-group",[r("van-field",{attrs:{required:"",clearable:"",label:"身份证号","right-icon":"question-o",placeholder:e.errorHint["idCard"],type:"text",maxlength:"18","error-message":e.errorInfo["idCard"]},on:{"click-right-icon":function(a){return e.$toast(e.errorHint["idCard"])},blur:function(a){return e.validate("idCard")}},model:{value:e.form["idCard"],callback:function(a){e.$set(e.form,"idCard",a)},expression:"form['idCard']"}}),r("van-field",{attrs:{required:"",clearable:"",label:"原始密码","right-icon":"question-o",placeholder:e.errorHint["originalPassowrd"],maxlength:"20",type:"password","error-message":e.errorInfo["sureNewPassword"]},on:{"click-right-icon":function(a){return e.$toast(e.errorHint["originalPassowrd"])},blur:function(a){return e.validate("originalPassowrd")}},model:{value:e.form["originalPassowrd"],callback:function(a){e.$set(e.form,"originalPassowrd",a)},expression:"form['originalPassowrd']"}}),r("van-field",{attrs:{required:"",clearable:"",label:e.label,"right-icon":"question-o",placeholder:e.errorHint[e.flag],type:"password",maxlength:"20","error-message":e.errorInfo[e.flag]},on:{"click-right-icon":function(a){return e.$toast(e.errorHint[e.flag])},blur:function(a){return e.validate(e.flag)}},model:{value:e.form[e.flag],callback:function(a){e.$set(e.form,e.flag,a)},expression:"form[flag]"}}),r("van-field",{attrs:{required:"",clearable:"",label:"确认新密码","right-icon":"question-o",placeholder:e.errorHint["sureNewPassword"],maxlength:"20",type:"password","error-message":e.errorInfo["sureNewPassword"]},on:{"click-right-icon":function(a){return e.$toast(e.errorHint["sureNewPassword"])},blur:function(a){return e.validate("sureNewPassword")}},model:{value:e.form["sureNewPassword"],callback:function(a){e.$set(e.form,"sureNewPassword",a)},expression:"form['sureNewPassword']"}})],1)],1),r("div",{staticClass:"placeholderLine40"}),r("div",{staticClass:"sureAppointBtnBox"},[r("van-button",{attrs:{color:"linear-gradient(to right, #ffae00 , #ff8400)",size:"normal",block:!0,loading:e.update2Loading},on:{click:function(a){return e.sureUpdate("update2")}}},[e._v("确 认")])],1)])],1)},t=[function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",{staticClass:"flex2"},[r("span",{staticClass:"ellipsis"},[e._v("修改登录密码")]),r("i",{staticClass:"iconfont iconfont-right-arrow2"})])},function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",{staticClass:"flex2"},[r("span",{staticClass:"ellipsis"},[e._v("修改安全密码")]),r("i",{staticClass:"iconfont iconfont-right-arrow2"})])}],o=(r("ac1f"),r("5319"),r("c8f1")),i=r("0418"),n=r("2241"),l={data:function(){return{update1Loading:!1,update2Loading:!1,showTipModel:!1,result:"",loading:!0,showUpdateModel:!1,showUpdatePasswordModel:!1,showRealNameModel:!1,titleName:"",label:"---",userInfo:"",form:{nickName:"",telPhone:"",realName:"",alipayNum:"",wechartNum:"",address:"",originalPassowrd:"",loginPassword:"",securityPassword:"",sureNewPassword:"",verificationCode:"",bankCard:"",idCard:""},errorHint:{nickName:"",telPhone:"",realName:"",alipayNum:"",wechartNum:"",address:"",originalPassowrd:"",loginPassword:"",securityPassword:"",sureNewPassword:"",verificationCode:"",bankCard:"",idCard:""},errorInfo:{nickName:"",telPhone:"",realName:"",alipayNum:"",wechartNum:"",address:"",originalPassowrd:"",loginPassword:"",securityPassword:"",sureNewPassword:"",verificationCode:"",bankCard:"",idCard:""},updateValidate:!0,flag:"",isRealName:!0,userId:"",mobilePhone:""}},components:{mHeader:i["a"]},created:function(){var e=this,a=localStorage.getItem("_USERINFO_");a?(e.userInfo=JSON.parse(a),console.log(e.userInfo,"_this.userInfo"),e.userId=e.userInfo.userId,e.mobilePhone=e.userInfo.mobilePhone,e.getUserInfo(),e.initializeHintInfo()):e.$router.replace("login")},methods:{back:function(){this.$router.go(-1)},cancelAccount:function(){var e=this;n["a"].confirm({title:"注销确认",message:"你确定要注销[删除]这个账号？"}).then((function(){e.$ajax.ajax(e.$api.cancelAccount,"GET",null,(function(a){a.code==e.$api.CODE_OK?(e.$toast("注销成功"),e.$router.replace("login")):1001==a.code&&n["a"].alert({title:"系统提示",confirmButtonText:"好的",message:a.message}).then((function(){}))}))})).catch((function(){}))},getActiveStatus:function(e){var a=this;return-1==e?"您尚未实名认证":0==e?a.$api.checkTip:2==e?(console.log("_this.userInfo.remark",a.userInfo.remark),"审核结果："+a.userInfo.remark):void 0},handleCopy:function(e,a){var r=this;Object(o["a"])(e,a,(function(e){r.$toast("复制区块地址成功")}))},logout:function(){var e=this;e.$ajax.ajax(e.$api.loginOut,"GET",null,(function(a){a.code==e.$api.CODE_OK&&(e.$toast(a.message),localStorage.removeItem("_USERINFO_"),e.$cookies.remove("userId"),e.$cookies.remove("token"))}),(function(){e.$router.replace("login")}))},showTip:function(){this.showTipModel=!0},toRealName:function(){var e=this;e.showRealNameModel=!0},getUserInfo:function(){var e=this;e.loading=!0,e.$ajax.ajax(e.$api.getAssistUserInfo,"GET",null,(function(a){console.log("res",a),a.code==e.$api.CODE_OK&&(e.userInfo=a.data,localStorage.setItem("_USERINFO_",JSON.stringify(a.data)),e.userId=e.userInfo.userId,1==e.userInfo.actived?e.isRealName=!0:e.isRealName=!1),a.code==e.$api.CODE_4003&&(e.isRealName=!1)}))},initializeHintInfo:function(){var e=this;e.errorHint={nickName:"请填写1~7位昵称",realName:"请填写2~20位真实姓名",alipayNum:"请填写绑定了支付宝的登录手机号",wechartNum:"请填写绑定了微信的登录手机号",address:"",originalPassowrd:"请填写原来的密码",loginPassword:"请填写新登录密码",securityPassword:"请填写新安全密码",sureNewPassword:"请确认新密码",verificationCode:"请填写验证码",bankCard:"请填写银行卡号",idCard:"请填写实名时所留的身份证号"}},update:function(e){var a=this;console.log("flag",e),this.showUpdateModel=!0,a.flag=e,a.form=a.$utils.formClear(a.form),console.log("_this.form",a.form),"nickName"==e?(a.label="昵称",a.titleName="修改昵称",a.form.nickName=a.userInfo.nickName):"telPhone"==e?(a.label="手机号",a.titleName="修改手机号"):"realName"==e?(a.label="真实姓名",a.titleName="修改真实姓名",a.form.realName=a.userInfo.realName):"alipayNum"==e?(a.label="支付宝",a.titleName="修改支付宝",a.form.alipayNum=a.userInfo.alipayNum):"wechartNum"==e?(a.label="微信号",a.titleName="修改微信号",a.form.wechartNum=a.userInfo.wechartNum):"bankCard"==e?(a.label="银行卡",a.titleName="修改银行卡号"):"securityPassword"==e&&(a.label="安全密码",a.titleName="修改安全密码")},updatePassword:function(e){var a=this;console.log("flag",e),this.showUpdatePasswordModel=!0,a.flag=e,a.form=a.$utils.formClear(a.form),"loginPassword"==e?(a.label="登录密码",a.titleName="修改登录密码"):"securityPassword"==e&&(a.label="安全密码",a.titleName="修改安全密码")},sureUpdate:function(e){var a=this;if("update1"==e){var r={idCard:a.form.idCard,securityPassword:a.form.safePassword};if(r[a.flag]=a.form[a.flag],console.log("params",r),a.$utils.hasNull(r))return void a.$toast("系统提示：请填写完整信息");if(a.$utils.hasVal(a.errorInfo))return void a.$toast("请按要求填写信息");if(a.userInfo.platformTicket<10)return void a.$toast("系统提示：您的帮扶券不足，修改信息要使用10张帮扶券");r.securityPassword=a.$JsEncrypt.encrypt(a.form.safePassword),console.log("params",r),a.update1Loading=!0,a.$ajax.ajax(a.$api.updateAssistUsrInfo,"POST",r,(function(e){e.code==a.$api.CODE_OK?(a.$toast("系统提示：修改成功"),a.showUpdateModel=!1,a.getUserInfo()):n["a"].alert({title:"系统提示",message:e.message}).then((function(){}))}),(function(){a.update1Loading=!1}))}else if("update2"==e)if(a.form[a.flag]==a.form["sureNewPassword"]){var s={idCard:a.form.idCard,originalPassowrd:a.form.originalPassowrd};if(a.form.loginPassword&&(s.type=0,s.password=a.$JsEncrypt.encrypt(a.form.loginPassword)),a.form.securityPassword&&(s.type=1,s.password=a.$JsEncrypt.encrypt(a.form.securityPassword)),a.$utils.hasNull(s))return void a.$toast("系统提示：请填写完整信息");s.originalPassowrd=a.$JsEncrypt.encrypt(a.form.originalPassowrd),a.update2Loading=!0,a.$ajax.ajax(a.$api.updatePassword,"POST",s,(function(e){e.code==a.$api.CODE_OK?(a.showUpdatePasswordModel=!1,a.$toast("系统提示：修改成功")):n["a"].alert({title:"系统提示",message:e.message}).then((function(){}))}),(function(){a.update2Loading=!1}))}else a.$toast("系统提示：2次密码不一致")},validate:function(e){var a=this;"nickName"==e?a.form.nickName.length<=7&&a.form.nickName.length>0?a.errorInfo.nickName="":a.errorInfo.nickName=a.errorHint.nickName:"telPhone"==e?a.$reg.phone.test(a.form.telPhone)?a.errorInfo.telPhone="":a.errorInfo.telPhone=a.errorHint.telPhone:"realName"==e?a.form.realName.length<=20&&a.form.realName.length>1?a.errorInfo.realName="":a.errorInfo.realName=a.errorHint.realName:"alipayNum"==e?a.$reg.alipay.test(a.form.alipayNum)?a.errorInfo.alipayNum="":a.errorInfo.alipayNum=a.$reg.alipayHint:"wechartNum"==e?a.$reg.weichat.test(a.form.wechartNum)?a.errorInfo.wechartNum="":a.errorInfo.wechartNum=a.errorHint.wechartNum:"originalPassowrd"==e?a.$reg.password.test(a.form.originalPassowrd)?a.errorInfo.originalPassowrd="":a.errorInfo.originalPassowrd=a.$reg.passwordHint:"loginPassword"==e?a.$reg.password.test(a.form.loginPassword)?a.errorInfo.loginPassword="":a.errorInfo.loginPassword=a.$reg.passwordHint:"securityPassword"==e?a.$reg.safePassword.test(a.form.securityPassword)?a.errorInfo.securityPassword="":a.errorInfo.securityPassword=a.$reg.securityPasswordHint:"bankCard"==e?a.$reg.bankCard.test(a.form.bankCard)?a.errorInfo.bankCard="":a.errorInfo.bankCard=a.$reg.bankCardHint:"idCard"==e&&(a.$reg.idCard.test(a.form.idCard)?a.errorInfo.idCard="":a.errorInfo.idCard=a.$reg.idCardHint)},refreshEvent:function(){console.log("refresh");var e=this;e.getUserInfo()}}},c=l,d=(r("e14e"),r("2877")),f=Object(d["a"])(c,s,t,!1,null,null,null);a["default"]=f.exports},"386d":function(e,a,r){},e14e:function(e,a,r){"use strict";var s=r("386d"),t=r.n(s);t.a}}]);