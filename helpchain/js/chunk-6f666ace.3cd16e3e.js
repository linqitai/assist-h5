(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f666ace"],{"0418":function(i,e,t){"use strict";var a=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"header-wrapper"},[i._t("default")],2)])},l=[],s={props:{msg:String},data:function(){return{active:0,boolTrue:!0}},created:function(){}},o=s,n=(t("521e"),t("2877")),c=Object(n["a"])(o,a,l,!1,null,"5dfa2afe",null);e["a"]=c.exports},"1ce9":function(i,e,t){},"51a6":function(i,e,t){},"521e":function(i,e,t){"use strict";var a=t("51a6"),l=t.n(a);l.a},"742e":function(i,e,t){"use strict";t.r(e);var a=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"millPage"},[t("div",{staticClass:"millContent"},[t("van-pull-refresh",{on:{refresh:i.onLoadMillShop},model:{value:i.loading,callback:function(e){i.loading=e},expression:"loading"}},[t("van-list",{attrs:{finished:i.finishedMillShop,"finished-text":"没有更多了"},model:{value:i.loadingMillShop,callback:function(e){i.loadingMillShop=e},expression:"loadingMillShop"}},[t("div",{staticClass:"millList"},i._l(i.millShopList,(function(e){return t("div",{key:e.id,staticClass:"item"},[t("div",{staticClass:"flex flex2"},[t("div",{staticClass:"line1"},[t("span",{staticClass:"millName"},[i._v(i._s(i._f("machineTypeType")(e.type)))]),t("span",{staticClass:"calcullatePower"},[i._v("算力 "+i._s(e.calculationPower)+"GH/s")])]),t("div",{staticClass:"line"},[i._v("租金 "+i._s(e.price)+"矿石")]),t("div",{staticClass:"line"},[i._v("总产 "+i._s(e.totalOutput)+"矿石")]),t("div",{staticClass:"line"},[i._v("运行总时长 "+i._s(e.allRuntime)+"小时")]),t("div",{staticClass:"line"},[i._v("限租 "+i._s(e.limitBuy)+"台")])]),t("div",{staticClass:"flex flex3"},[t("div",{staticClass:"line"},[i._v("库存"+i._s(e.inventory))]),t("div",{staticClass:"line margT3"},[t("van-button",{attrs:{round:"",type:"info",size:"small",color:"linear-gradient(to right, #ffae00, #ff8400)",block:!0},on:{click:function(t){return i.buyMill(e)}}},[i._v("租赁")])],1)])])})),0)])],1)],1),t("van-dialog",{attrs:{title:"请选择用什么租赁","show-cancel-button":!1,"show-confirm-button":!1,"close-on-click-overlay":!0},model:{value:i.showSelectBox,callback:function(e){i.showSelectBox=e},expression:"showSelectBox"}},[t("div",{staticClass:"paddingWing"},[t("div",{staticClass:"placeholderLine20"}),t("div",{staticClass:"f-14"},[i._v("当前可用矿石："+i._s(i.userInfo.thisWeekMineral))]),t("div",{staticClass:"placeholderLine10"}),t("div",{staticClass:"f-14"},[i._v("当前可用贡献值："+i._s(i.userInfo.contributionValue))]),t("div",{staticClass:"placeholderLine10"}),t("div",{staticClass:"f-14"},[i._v("租赁此矿机要花"+i._s(i.price)+"个矿石或者贡献值")]),t("div",{staticClass:"placeholderLine10"}),t("van-radio-group",{on:{change:i.selectRadioChange},model:{value:i.selectRadioValue,callback:function(e){i.selectRadioValue=e},expression:"selectRadioValue"}},[t("van-radio",{attrs:{name:"1"}},[i._v("矿石")]),t("div",{staticClass:"placeholderLine10"}),t("van-radio",{attrs:{name:"2"}},[i._v("贡献值")])],1),t("div",{staticClass:"placeholderLine20"})],1),t("van-button",{attrs:{type:"info",loading:i.buyMillLoading,disabled:i.buyMillLoading,color:"linear-gradient(to right, #ffae00, #ff8400)",block:!0},on:{click:i.sureBuyMillEvent}},[i._v("租赁")])],1),t("van-dialog",{attrs:{title:i.receiptModelTile,"show-confirm-button":i.isShowConfirmButton},model:{value:i.showReceiptTip,callback:function(e){i.showReceiptTip=e},expression:"showReceiptTip"}},[t("div",{staticClass:"placeholderLine20"}),t("div",{staticClass:"paddingWing textCenter"},[i.isShowReceiptLoading?t("van-loading",{attrs:{type:"spinner",color:"#1989fa"}}):i._e(),i.isShowMineralNum?t("div",{staticClass:"margT10 isShowMineralNum"},[i._v(i._s(i.mineralNumTip))]):i._e()],1),t("div",{staticClass:"placeholderLine20"}),t("div",{staticClass:"placeholderLine20"})]),t("van-dialog",{attrs:{title:"问题小帮手",confirmButtonText:"好的"},model:{value:i.showTipModel,callback:function(e){i.showTipModel=e},expression:"showTipModel"}},[t("div",{staticClass:"paddingWing f-12 lineHeight tip4model2"},[t("div",{staticClass:"textIndent"},[i._v(" "+i._s(i.$api.tip4ReduceMill)+" ")]),t("div",{staticClass:"placeholderLine10"})])])],1)},l=[],s=(t("ac1f"),t("5319"),t("0418")),o=t("2241"),n=t("d399"),c={data:function(){return{buyMillLoading:!1,selectRadioValue:"1",loading:!1,showTipModel:!1,activeName:"myMill",loadingMyMill:!1,finishedMyMill:!1,finishedMyMillText:"",myMillList:[],loadingMillShop:!1,finishedMillShop:!1,millShopList:[],loadingPastMill:!1,finishedPastMill:!1,pastMillList:[],miningMachine:[{miningMachineType:"小型矿机",price:100,totalOutput:12,allRuntime:720,turnOnTime:"2019-12-12 12:12:12",afterReceipt:"2019-12-13 12:12:12"}],errorHint:{securityCode:""},userInfo:"",showReceiptTip:!1,showSelectBox:!1,isShowReceiptLoading:!0,mineralNumTip:"",isShowMineralNum:!1,receiptModelTile:"领取结果计算中",isShowConfirmButton:!1,price:"",machineId:""}},components:{mHeader:s["a"]},created:function(){var i=this,e=localStorage.getItem("_USERINFO_");if(!e)return i.$toast(i.$api.loginAgainTipText),void i.$router.replace("login");if(i.userInfo=JSON.parse(e),i.$cookies.get("HMSI")){var t=JSON.parse(localStorage.getItem("millShopList"));t?(i.millShopList=t,i.finishedMillShop=!0):i.onLoadMillShop()}else i.onLoadMillShop()},methods:{back:function(){this.$router.go(-1)},showTip:function(){this.showTipModel=!0},tagColor:function(i){return 0==i?"tag0":1==i?"tag1":2==i?"tag2":3==i?"tag2":4==i?"tag2":void 0},selectRadioChange:function(i){},validate:function(i){var e=this;"securityCode"==i&&(e.$reg.securityCode.test(e.form.securityCode.replace(/ /g,""))?e.errorHint.securityCode="":e.errorHint.securityCode=e.$reg.securityCodeHint)},buyMill:function(i){var e=this;e.showSelectBox=!0,e.price=i.price,e.machineId=i.id},sureBuyMillEvent:function(){var i=this;if(i.showSelectBox=!1,i.buyMillLoading=!0,1==i.selectRadioValue){if(i.userInfo.thisWeekMineral<i.price)return i.$toast("您所拥有的矿石不够租赁该矿机"),void(i.buyMillLoading=!1)}else if(2==i.selectRadioValue&&i.userInfo.contributionValue<i.price)return i.$toast("您所拥有的贡献值不够租赁该矿机"),void(i.buyMillLoading=!1);var e={machineId:i.machineId,use:i.selectRadioValue};n["a"].loading({message:"租赁中...",forbidClick:!0,loadingType:"spinner"}),i.$ajax.ajax(i.$api.insertAssistMyMachine,"POST",e,(function(e){n["a"].clear(),e.code==i.$api.CODE_OK?o["a"].alert({title:"系统提示",message:1==e.data?"租赁成功":"租赁失败"}).then((function(){1==e.data&&(i.onLoadMillShop(),i.$cookies.set("isRefreshUserInfo",1,i.$api.cookiesTime),i.$router.push("myMill"))})):o["a"].alert({title:"系统提示",message:e.message}).then((function(){}))}),(function(){i.buyMillLoading=!1}))},onLoadMillShop:function(){var i=this;i.loading=!0,i.$ajax.ajax(i.$api.getAssistMiningMachineList4MillShop,"GET",null,(function(e){if(e.code==i.$api.CODE_OK){var t=e.data;localStorage.setItem("millShopList",JSON.stringify(t)),i.$cookies.set("HMSI",1,i.$api.cookiesTime),i.millShopList=t}}),(function(){i.loading=!1,i.loadingMillShop=!1,i.finishedMillShop=!0}))},initializeTabActiveName:function(){var i=this;i.$cookies.isKey("mill_tab_name")&&(i.activeName=i.$cookies.get("mill_tab_name"))},tabChange:function(i,e){this.$cookies.set("mill_tab_name",i,3600)}}},r=c,d=(t("e79c"),t("2877")),u=Object(d["a"])(r,a,l,!1,null,null,null);e["default"]=u.exports},e79c:function(i,e,t){"use strict";var a=t("1ce9"),l=t.n(a);l.a}}]);