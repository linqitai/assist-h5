(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c69883c"],{"0fba":function(t,e,a){},"1cff":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"fullscreenBox",staticClass:"fullscreenBox",on:{click:t.handleFullScreen}},[a("i",{staticClass:"iconfont",class:[t.fullscreen?"iconfont-close-fullscreen":"iconfont-open-fullscreen"]})])},i=[],l={props:{msg:String},data:function(){return{fullscreen:!1}},created:function(){var t=this;t.fullscreen=t.$store.state.fullscreen||!1,console.log("_this.fullscreen:",t.fullscreen)},methods:{handleFullScreen:function(){var t=this;if(t.$toast("_this.phoneType："+t.phoneType),"i"==t.phoneType)return console.log("IOS系统暂时不支持全屏窗口"),void t.$toast("IOS系统暂时不支持全屏窗口");if("pt"!=t.phoneType){var e=document.documentElement;t.fullscreen?(t.$toast({message:"关闭全屏",closeOnClick:!0,duration:1e3}),document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()):(t.$toast({message:"开启全屏",closeOnClick:!0,duration:1e3}),e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()),t.fullscreen=!t.fullscreen,console.log("_this.fullscreen",t.fullscreen),t.$store.commit("setFullscreen",t.fullscreen),console.log("fullscreen=>",t.$store.state.fullscreen)}else t.$toast("葡萄浏览器暂时不支持全屏窗口")}}},n=l,o=(a("ab91"),a("2877")),c=Object(o["a"])(n,s,i,!1,null,"38c01150",null);e["a"]=c.exports},7111:function(t,e,a){},8673:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"refreshBox",staticClass:"refreshBox",on:{click:t.handleRefresh}},[a("i",{staticClass:"iconfont iconfont-refresh"})])},i=[],l={props:{msg:String},data:function(){return{active:0,boolTrue:!0}},created:function(){},methods:{handleRefresh:function(){this.$emit("refreshEvent")}}},n=l,o=(a("86b1"),a("2877")),c=Object(o["a"])(n,s,i,!1,null,"bccff870",null);e["a"]=c.exports},"86b1":function(t,e,a){"use strict";var s=a("0fba"),i=a.n(s);i.a},"99af":function(t,e,a){"use strict";var s=a("23e7"),i=a("d039"),l=a("e8b5"),n=a("861d"),o=a("7b0b"),c=a("50c4"),r=a("8418"),d=a("65f0"),u=a("1dde"),v=a("b622"),p=a("2d00"),f=v("isConcatSpreadable"),m=9007199254740991,C="Maximum allowed index exceeded",h=p>=51||!i((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),_=u("concat"),g=function(t){if(!n(t))return!1;var e=t[f];return void 0!==e?!!e:l(t)},b=!h||!_;s({target:"Array",proto:!0,forced:b},{concat:function(t){var e,a,s,i,l,n=o(this),u=d(n,0),v=0;for(e=-1,s=arguments.length;e<s;e++)if(l=-1===e?n:arguments[e],g(l)){if(i=c(l.length),v+i>m)throw TypeError(C);for(a=0;a<i;a++,v++)a in l&&r(u,v,l[a])}else{if(v>=m)throw TypeError(C);r(u,v++,l)}return u.length=v,u}})},a9e1:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"myDeal"},[a("m-header",[a("i",{staticClass:"leftBox iconfont iconfont-left-arrow",on:{click:t.back}}),a("div",{staticClass:"text"},[t._v(" 我的交易 ")]),a("i",{staticClass:"iconfont iconfont-question rightBox icon",on:{click:t.showTip}})]),a("div",{staticClass:"myDealTabs"},[a("van-pull-refresh",{on:{refresh:t.refreshEvent},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[a("van-tabs",{attrs:{background:t.$api.tabBgColor,color:t.$api.tabActiveColor,"title-active-color":t.$api.tabActiveColor,"title-inactive-color":t.$api.tabTextColor,border:!1,animated:"",sticky:""},on:{change:t.tabChange},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("van-tab",{attrs:{title:"求购中",name:"buy"}},[a("van-list",{attrs:{finished:t.finished1,"finished-text":"没有更多了"},on:{load:t.onLoad1},model:{value:t.loading1,callback:function(e){t.loading1=e},expression:"loading1"}},[a("div",{staticClass:"list"},t._l(t.list1,(function(e){return a("div",{key:e.id,staticClass:"item"},[a("div",{staticClass:"flex"},[a("div",{staticClass:"info"},[a("div",{staticClass:"flex1"},[a("div",[t._v("数量")]),a("div",{staticClass:"d"},[t._v(t._s(e.minNumber)+"~"+t._s(e.maxNumber)+t._s(t.$api.numUnit))])]),a("div",{staticClass:"flex1"},[a("div",[t._v("单价")]),a("div",{staticClass:"d"},[t._v(t._s(e.price)+"CNY")])])]),a("div",{staticClass:"timeBox"},[t._v(" 挂单时间 "+t._s(e.createTime)+" ")])]),a("div",{staticClass:"btnBox"},[a("div",[t._v(t._s(t.maxPrice(e))+"CNY")]),a("div",{staticClass:"placeholderLine8"}),a("van-button",{attrs:{type:"primary",size:"small",block:!0},on:{click:function(a){return t.cancelBuyBillBtn(e)}}},[t._v("撤 销")])],1)])})),0)])],1),a("van-tab",{attrs:{title:"待付款",name:"pay"}},[a("van-list",{attrs:{finished:t.finished2,"finished-text":"没有更多了"},on:{load:t.onLoad2},model:{value:t.loading2,callback:function(e){t.loading2=e},expression:"loading2"}},[a("div",{staticClass:"list"},t._l(t.list2,(function(e){return a("div",{key:e.id,staticClass:"item"},[a("div",{staticClass:"flex"},[a("div",{staticClass:"info"},[a("div",{staticClass:"flexNum"},[a("div",[t._v("数量")]),a("div",{staticClass:"d"},[t._v(t._s(e.num)+" "+t._s(t.$api.numUnit))])]),a("div",{staticClass:"flex1"},[a("div",[t._v("单价")]),a("div",{staticClass:"d"},[t._v(t._s(e.price)+"CNY")])]),a("div",{staticClass:"flex1"},[a("div",[t._v("总价")]),a("div",{staticClass:"d"},[t._v(t._s(t.totalPrice(e))+"CNY")])])]),a("div",{staticClass:"timeBox"},[t._v(" 匹配时间 "+t._s(e.machingTime)+" ")])]),a("div",{staticClass:"operatorBox"},[a("div",[a("span",{staticClass:"showDetailBtn lineHeight",on:{click:function(a){return t.showSellerInfoBtn(e)}}},[t._v("了解卖家")])]),a("div",{staticClass:"margT6"},[a("span",{staticClass:"showDetailBtn lineHeight",on:{click:function(a){return t.showDetailBtn(e)}}},[t._v("订单详情")])]),a("div",{staticClass:"margT6 lineHeight yellow"},[t._v(" "+t._s(t._f("dealStatusType")(e.status))+" ")]),"sell"==t.buyOrSell(e)&&0==e.status?a("div",{staticClass:"margT6"},[a("span",{staticClass:"cancelBtn",on:{click:function(a){return t.cancelDealBtn(e)}}},[t._v("取消交易")])]):t._e(),"buy"==t.buyOrSell(e)&&0==e.status&&2!=e.type?a("div",{staticClass:"margT6"},[a("span",{staticClass:"cancelBtn",on:{click:function(a){return t.lockTransactionBtn(e)}}},[t._v("锁定交易")])]):t._e()]),a("i",{staticClass:"tagIcon iconfont iconfont-tag tag4Buy"}),a("i",{staticClass:"tagIconText"},[t._v("买")])])})),0)])],1),a("van-tab",{attrs:{title:"待收款",name:"get"}},[a("van-list",{attrs:{finished:t.finished4,"finished-text":"没有更多了"},on:{load:t.onLoad4},model:{value:t.loading4,callback:function(e){t.loading4=e},expression:"loading4"}},[a("div",{staticClass:"list"},t._l(t.list4,(function(e){return a("div",{key:e.id,staticClass:"item"},[a("div",{staticClass:"flex"},[a("div",{staticClass:"info"},[a("div",{staticClass:"flexNum"},[a("div",[t._v("数量")]),a("div",{staticClass:"d"},[t._v(t._s(e.num)+" "+t._s(t.$api.numUnit))])]),a("div",{staticClass:"flex1"},[a("div",[t._v("单价")]),a("div",{staticClass:"d"},[t._v(t._s(e.price)+"CNY")])]),a("div",{staticClass:"flex1"},[a("div",[t._v("总价")]),a("div",{staticClass:"d"},[t._v(t._s(t.totalPrice(e))+"CNY")])])]),a("div",{staticClass:"timeBox"},[t._v(" 匹配时间 "+t._s(e.machingTime)+" ")])]),a("div",{staticClass:"operatorBox"},[a("div",[a("span",{staticClass:"showDetailBtn lineHeight",on:{click:function(a){return t.showDetailBtn(e)}}},[t._v("订单详情")])]),a("div",{staticClass:"margT6 lineHeight yellow"},[t._v(" "+t._s(t._f("dealStatusType")(e.status))+" ")]),"sell"!=t.buyOrSell(e)||0!=e.status&&1!=e.status?t._e():a("div",{staticClass:"margT6"},[a("span",{staticClass:"cancelBtn",on:{click:function(a){return t.cancelDealBtn(e)}}},[t._v("取消交易")])])]),a("i",{staticClass:"tagIcon iconfont iconfont-tag tag4Sell"}),a("i",{staticClass:"tagIconText"},[t._v("卖")])])})),0)])],1),a("van-tab",{attrs:{title:"已完成",name:"complated"}},[a("van-list",{attrs:{finished:t.finished3,"finished-text":"没有更多了"},on:{load:t.onLoad3},model:{value:t.loading3,callback:function(e){t.loading3=e},expression:"loading3"}},[a("div",{staticClass:"list"},t._l(t.list3,(function(e){return a("div",{key:e.id,staticClass:"item"},[a("div",{staticClass:"flex"},[a("div",{staticClass:"info"},[a("div",{staticClass:"flexNum"},[a("div",[t._v("数量")]),a("div",{staticClass:"d"},[t._v(t._s(e.num)+" "+t._s(t.$api.numUnit))])]),a("div",{staticClass:"flex1"},[a("div",[t._v("单价")]),a("div",{staticClass:"d"},[t._v(t._s(e.price)+"CNY")])]),a("div",{staticClass:"flex1"},[a("div",[t._v("总价")]),a("div",{staticClass:"d"},[t._v(t._s(t.totalPrice(e))+"CNY")])])]),a("div",{staticClass:"timeBox"},[t._v(" 匹配时间 "+t._s(e.machingTime)+" ")]),a("div",{staticClass:"timeBox"},[t._v(" 完成时间 "+t._s(e.coinReleaseTime)+" ")])]),a("div",{staticClass:"operatorBox4complate"},[a("div",{staticClass:"margT6 lineHeight yellow"},[t._v(" "+t._s(t._f("dealStatusType")(e.status))+" ")])]),a("i",{staticClass:"tagIcon iconfont iconfont-tag",class:t.tagColor(e)}),a("i",{staticClass:"tagIconText"},[t._v(t._s("buy"==t.buyOrSell(e)?"买":"卖"))])])})),0)])],1),a("van-tab",{attrs:{title:"已取消",name:"canceled"}},[a("van-list",{attrs:{finished:t.finished5,"finished-text":"没有更多了"},on:{load:t.onLoad5},model:{value:t.loading5,callback:function(e){t.loading5=e},expression:"loading5"}},[a("div",{staticClass:"list"},t._l(t.list5,(function(e){return a("div",{key:e.id,staticClass:"item"},[a("div",{staticClass:"flex"},[a("div",{staticClass:"info"},[a("div",{staticClass:"flexNum"},[a("div",[t._v("数量")]),a("div",{staticClass:"d"},[t._v(t._s(e.num)+" "+t._s(t.$api.numUnit))])]),a("div",{staticClass:"flex1"},[a("div",[t._v("单价")]),a("div",{staticClass:"d"},[t._v(t._s(e.price)+"CNY")])]),a("div",{staticClass:"flex1"},[a("div",[t._v("总价")]),a("div",{staticClass:"d"},[t._v(t._s(t.totalPrice(e))+"CNY")])])]),a("div",{staticClass:"timeBox"},[t._v(" 匹配时间 "+t._s(e.machingTime)+" ")]),a("div",{staticClass:"timeBox"},[t._v(" 取消时间 "+t._s(e.canCancelTime)+" ")])]),a("div",{staticClass:"operatorBox4complate"},[a("div",{staticClass:"margT6 lineHeight yellow"},[t._v(" "+t._s(t._f("dealStatusType")(e.status))+" ")])]),a("i",{staticClass:"tagIcon iconfont iconfont-tag",class:t.tagColor(e)}),a("i",{staticClass:"tagIconText"},[t._v(t._s("buy"==t.buyOrSell(e)?"买":"卖"))])])})),0)])],1)],1)],1)],1),a("van-action-sheet",{attrs:{title:"订单详情"},model:{value:t.showSellerDetailModel,callback:function(e){t.showSellerDetailModel=e},expression:"showSellerDetailModel"}},[t.detail4sellerInfo?t._e():a("div",[a("div",{staticClass:"placeholderLine20"}),a("van-skeleton",{attrs:{row:16}}),a("div",{staticClass:"placeholderLine20"})],1),t.detail4sellerInfo?a("div",{staticClass:"detailBox"},[a("div",{staticClass:"tip4model3"},[t._v(" 平台为保证交易的顺利进行，真实姓名与支付宝不一致永久冻结账号处理，交易的时候若遇到此问题欢迎向平台诉讼，情况属实买方会得到奖励。 ")]),a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("卖方")]),a("span",{staticClass:"value"},[t._v(t._s(t.detail4sellerInfo.realName))])]),a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("卖方手机号")]),a("div",{staticClass:"value"},[a("span",{staticClass:"copy",on:{click:function(e){return t.handleCopy(t.detail4sellerInfo.mobilePhone,e)}}},[t._v("复制")]),t._v(t._s(t.detail4sellerInfo.mobilePhone))])]),a("div",{staticClass:"line"},[a("div",{staticClass:"label"},[t._v("卖方支付宝")]),a("div",{staticClass:"value"},[a("span",{staticClass:"copy",on:{click:function(e){return t.handleCopy(t.detail4sellerInfo.alipayNum,e)}}},[t._v("复制")]),t._v(t._s(t.detail4sellerInfo.alipayNum))])]),a("div",{staticClass:"line"},[a("div",{staticClass:"label"},[t._v("卖方微信号")]),a("div",{staticClass:"value"},[a("span",{staticClass:"copy",on:{click:function(e){return t.handleCopy(t.detail4sellerInfo.wechartNum,e)}}},[t._v("复制")]),t._v(t._s(t.detail4sellerInfo.wechartNum))])]),a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("数量")]),a("span",{staticClass:"value"},[t._v(t._s(t.detail4sellerInfo.num)+" "+t._s(t.$api.numUnit))])]),a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("单价")]),a("span",{staticClass:"value"},[t._v(t._s(t.detail4sellerInfo.price.toFixed(2))+" CNY")])]),a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("总价")]),a("span",{staticClass:"value"},[t._v(t._s(t.totalPrice(t.detail4sellerInfo))+" CNY")])]),t.detail4sellerInfo.status>-1?a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("状态")]),a("span",{staticClass:"value textAdornColor"},[t._v(t._s(t._f("dealStatusType")(t.detail4sellerInfo.status)))])]):t._e(),t.detail4sellerInfo.remark?a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("诉讼")]),a("span",{staticClass:"value <red></red>"},[t._v(t._s(t.detail4sellerInfo.remark))])]):t._e(),0==t.detail4sellerInfo.status||1==t.detail4sellerInfo.status?a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("自动取消倒计时")]),a("span",{staticClass:"value textAdornColor"},[a("van-count-down",{attrs:{time:t.setCancelDealDownTime(t.detail4sellerInfo.canCancelTime)}})],1)]):t._e(),0==t.detail4sellerInfo.status||1==t.detail4sellerInfo.status?a("div",[a("van-button",{attrs:{color:"#ffae00",size:"normal",block:!0},on:{click:t.payedBtn}},[t._v("我已付款 让卖家确认")]),a("div",{staticClass:"placeholderLine10"}),a("van-button",{attrs:{color:"linear-gradient(to right, #c7c7c7 , #aaaaaa)",size:"normal",block:!0},on:{click:function(e){return t.cancelDealBtn(t.detail4sellerInfo)}}},[t._v("取消交易")])],1):t._e(),2==t.detail4sellerInfo.status||4==t.detail4sellerInfo.status?a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("卖方确认倒计时")]),a("span",{staticClass:"value textAdornColor"},[a("van-count-down",{attrs:{time:t.setLetSureDownTime(t.detail4sellerInfo.letSureTime)}})],1)]):t._e(),3==t.detail4sellerInfo.status?a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("付款凭证")]),a("span",{staticClass:"value"},[a("i",{staticClass:"iconfont iconfont-upload-pic"}),a("input",{staticClass:"selectPicInput",staticStyle:{opacity:"0"},attrs:{accept:"image/*",type:"file"},on:{change:function(e){return t.uploadIMG(e)}}})])]):t._e(),4==t.detail4sellerInfo.status?a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("修改凭证")]),a("span",{staticClass:"value"},[a("i",{staticClass:"iconfont iconfont-upload-pic"}),a("input",{staticClass:"selectPicInput",staticStyle:{opacity:"0"},attrs:{accept:"image/png,image/jpeg,image/jpg",type:"file"},on:{change:function(e){return t.uploadIMG(e)}}})])]):t._e(),4==t.detail4sellerInfo.status||5==t.detail4sellerInfo.status?a("div",[a("img",{staticClass:"selectedImg",attrs:{src:t.detail4sellerInfo.imgUrl}})]):t._e(),a("div",{staticClass:"margT10"},[a("van-button",{attrs:{color:"linear-gradient(to right, #c7c7c7 , #aaaaaa)",size:"normal",block:!0},on:{click:function(e){return t.complain(t.detail4sellerInfo)}}},[t._v("诉讼")])],1),a("div",{staticClass:"margT10 tip4model3",domProps:{innerHTML:t._s(t.$api.tipText)}})]):t._e()]),a("van-action-sheet",{attrs:{title:"订单详情"},model:{value:t.showAgentDetailModel,callback:function(e){t.showAgentDetailModel=e},expression:"showAgentDetailModel"}},[t.appointDealDetail?t._e():a("div",[a("div",{staticClass:"placeholderLine20"}),a("van-skeleton",{attrs:{row:16}}),a("div",{staticClass:"placeholderLine20"})],1),t.appointDealDetail?a("div",{staticClass:"detailBox"},[a("div",{staticClass:"tip4model3",domProps:{innerHTML:t._s(t.$api.tipText4Safe)}}),a("div",{staticClass:"margT10 tip4model3",domProps:{innerHTML:t._s(t.$api.tipText4AppointDeal)}}),a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("数量")]),a("span",{staticClass:"value"},[t._v(t._s(t.appointDealDetail.assistAppointDealInfo.num)+" "+t._s(t.$api.numUnit))])]),a("div",{staticClass:"line blueLight"},[a("span",{staticClass:"label"},[t._v("指导单价")]),a("span",{staticClass:"value"},[t._v(t._s(t.appointDealDetail.assistAppointDealInfo.curerntPlatformPrice)+" CNY")])]),a("div",{staticClass:"line blueLight"},[a("span",{staticClass:"label"},[t._v("指导总价")]),a("span",{staticClass:"value"},[t._v(t._s(t.getGuidancePrice)+" CNY")])]),a("div",{staticClass:"line blue"},[a("span",{staticClass:"label"},[t._v("担保单价")]),a("span",{staticClass:"value"},[t._v(t._s(t.appointDealDetail.assistAppointDealInfo.price.toFixed(2))+" CNY")])]),a("div",{staticClass:"line blue"},[a("span",{staticClass:"label"},[t._v("担保总价")]),a("span",{staticClass:"value"},[t._v(t._s(t.totalPrice(t.appointDealDetail.assistAppointDealInfo))+" CNY")])]),"pay"==t.activeName?a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("买方应付")]),a("span",{staticClass:"value"},[t._v(t._s(t.totalPrice(t.appointDealDetail.assistAppointDealInfo))+" CNY")])]):t._e(),"get"==t.activeName?a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("卖方应收")]),a("span",{staticClass:"value"},[t._v(t._s(t.sellerGet(t.appointDealDetail.assistAppointDealInfo))+" CNY")])]):t._e(),"get"==t.activeName?a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("代理应收")]),a("span",{staticClass:"value"},[t._v(t._s(t.agentGet(t.appointDealDetail.assistAppointDealInfo))+" CNY")])]):t._e(),t.appointDealDetail.assistAppointDealInfo.status>-1?a("div",{staticClass:"line textAdornColor"},[a("span",{staticClass:"label"},[t._v("状态")]),a("span",{staticClass:"value"},[t._v(t._s(t._f("dealStatusType")(t.appointDealDetail.assistAppointDealInfo.status)))])]):t._e(),0!=t.appointDealDetail.assistAppointDealInfo.status&&1!=t.appointDealDetail.assistAppointDealInfo.status||"get"!=t.activeName?t._e():a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("可取消倒计时")]),a("span",{staticClass:"value textAdornColor"},[a("van-count-down",{attrs:{time:t.setCancelDealDownTime(t.appointDealDetail.assistAppointDealInfo.canCancelTime)}})],1)]),a("div",{staticClass:"line green"},[a("span",{staticClass:"label"},[t._v("买方昵称")]),a("span",{staticClass:"value"},[t._v(t._s(t.appointDealDetail.assistAppointDealBuyerInfo.nickName))])]),a("div",{staticClass:"line red"},[a("span",{staticClass:"label"},[t._v("卖方昵称")]),a("span",{staticClass:"value"},[t._v(t._s(t.appointDealDetail.assistAppointDealSellerInfo.nickName))])]),a("div",{staticClass:"line blue"},[a("span",{staticClass:"label"},[t._v("代理姓名")]),a("span",{staticClass:"value"},[t._v(t._s(t.appointDealDetail.assistAppointAgentInfo.realName))])]),a("div",{staticClass:"line blue"},[a("div",{staticClass:"label"},[t._v("代理手机号")]),a("div",{staticClass:"value"},[a("span",{staticClass:"copy",on:{click:function(e){return t.handleCopy(t.appointDealDetail.assistAppointAgentInfo.mobilePhone,e)}}},[t._v("复制")]),t._v(t._s(t.appointDealDetail.assistAppointAgentInfo.mobilePhone))])]),a("div",{staticClass:"line blue"},[a("div",{staticClass:"label"},[t._v("代理支付宝")]),a("div",{staticClass:"value"},[a("span",{staticClass:"copy",on:{click:function(e){return t.handleCopy(t.appointDealDetail.assistAppointAgentInfo.alipayNum,e)}}},[t._v("复制")]),t._v(t._s(t.appointDealDetail.assistAppointAgentInfo.alipayNum))])]),a("div",{staticClass:"line blue"},[a("div",{staticClass:"label"},[t._v("代理微信号")]),a("div",{staticClass:"value"},[a("span",{staticClass:"copy",on:{click:function(e){return t.handleCopy(t.appointDealDetail.assistAppointAgentInfo.wechartNum,e)}}},[t._v("复制")]),t._v(t._s(t.appointDealDetail.assistAppointAgentInfo.wechartNum))])]),4==t.appointDealDetail.assistAppointDealInfo.status?a("van-button",{attrs:{color:"linear-gradient(to right, #ffae00 , #ff8400)",size:"normal",block:!0},on:{click:t.letMineralBtn}},[t._v("我已收到款 确认并释放矿石")]):t._e(),4==t.appointDealDetail.assistAppointDealInfo.status?a("div",{staticClass:"margT10"},[a("img",{staticClass:"selectedImg",attrs:{src:t.appointDealDetail.assistAppointDealInfo.imgUrl}})]):t._e(),2==t.appointDealDetail.assistAppointDealInfo.status&&"get"==t.activeName?a("div",{staticClass:"margT10"},[a("van-button",{attrs:{color:"linear-gradient(to right, #ffae00 , #ff8400)",size:"normal",block:!0},on:{click:t.letMineralBtn}},[t._v("我已收到款 确认并释放矿石")])],1):t._e(),0!=t.appointDealDetail.assistAppointDealInfo.status&&1!=t.appointDealDetail.assistAppointDealInfo.status||"pay"!=t.activeName?t._e():a("div",[a("van-button",{attrs:{color:"#ffae00",size:"normal",block:!0},on:{click:t.payedBtn}},[t._v("我已付款 让代理确认")]),a("div",{staticClass:"placeholderLine10"}),a("van-button",{attrs:{color:"linear-gradient(to right, #c7c7c7 , #aaaaaa)",size:"normal",block:!0},on:{click:function(e){return t.cancelDealBtn(t.appointDealDetail.assistAppointDealInfo)}}},[t._v("取消交易")])],1),a("div",{staticClass:"margT10"},[a("van-button",{attrs:{color:"linear-gradient(to right, #c7c7c7 , #aaaaaa)",size:"normal",block:!0},on:{click:function(e){return t.complain(t.appointDealDetail.assistAppointDealInfo)}}},[t._v("诉讼")])],1)],1):t._e()]),a("van-action-sheet",{attrs:{title:"订单详情"},model:{value:t.showBuyerDetailModel,callback:function(e){t.showBuyerDetailModel=e},expression:"showBuyerDetailModel"}},[t.detail4buyerInfo?t._e():a("div",[a("div",{staticClass:"placeholderLine20"}),a("van-skeleton",{attrs:{row:16}}),a("div",{staticClass:"placeholderLine20"})],1),t.detail4buyerInfo?a("div",{staticClass:"detailBox"},[a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("买方")]),a("span",{staticClass:"value"},[t._v(t._s(t.detail4buyerInfo.realName))])]),5!=t.detail4buyerInfo.status?a("div",{staticClass:"line"},[a("div",{staticClass:"label"},[t._v("买方手机号")]),a("div",{staticClass:"value"},[a("span",{staticClass:"copy",on:{click:function(e){return t.handleCopy(t.detail4buyerInfo.mobilePhone,e)}}},[t._v("复制")]),t._v(t._s(t.detail4buyerInfo.mobilePhone))])]):t._e(),5!=t.detail4buyerInfo.status?a("div",{staticClass:"line"},[a("div",{staticClass:"label"},[t._v("买方微信号")]),a("div",{staticClass:"value"},[a("span",{staticClass:"copy",on:{click:function(e){return t.handleCopy(t.detail4buyerInfo.wechartNum,e)}}},[t._v("复制")]),t._v(t._s(t.detail4buyerInfo.wechartNum))])]):t._e(),a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("数量")]),a("span",{staticClass:"value"},[t._v(t._s(t.detail4buyerInfo.num)+" "+t._s(t.$api.numUnit))])]),a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("单价")]),a("span",{staticClass:"value"},[t._v(t._s(t.detail4buyerInfo.price.toFixed(2))+" CNY")])]),a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("总价")]),a("span",{staticClass:"value"},[t._v(t._s(t.totalPrice(t.detail4buyerInfo))+" CNY")])]),t.detail4buyerInfo.status>-1?a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("状态")]),a("span",{staticClass:"value textAdornColor"},[t._v(t._s(t._f("dealStatusType")(t.detail4buyerInfo.status)))])]):t._e(),0==t.detail4buyerInfo.status||1==t.detail4buyerInfo.status?a("div",{staticClass:"line"},[a("span",{staticClass:"label"},[t._v("可取消倒计时")]),a("span",{staticClass:"value textAdornColor"},[a("van-count-down",{attrs:{time:t.setCancelDealDownTime(t.detail4buyerInfo.canCancelTime)}})],1)]):t._e(),1==t.detail4buyerInfo.status?a("div",{staticClass:"tipText2"},[t._v(" "+t._s(t.buyerHaveWord)+" ")]):t._e(),4==t.detail4buyerInfo.status?a("van-button",{attrs:{color:"linear-gradient(to right, #ffae00 , #ff8400)",size:"normal",block:!0},on:{click:t.letMineralBtn}},[t._v("我已收到款 确认并释放矿石")]):t._e(),4==t.detail4buyerInfo.status?a("div",{staticClass:"margT10"},[a("img",{staticClass:"selectedImg",attrs:{src:t.detail4buyerInfo.imgUrl}})]):t._e(),2==t.detail4buyerInfo.status?a("div",{staticClass:"margT10"},[a("van-button",{attrs:{color:"linear-gradient(to right, #ffae00 , #ff8400)",size:"normal",block:!0},on:{click:t.letMineralBtn}},[t._v("我已收到款 确认并释放矿石")]),a("div",{staticClass:"placeholderLine10"}),a("van-button",{attrs:{color:"linear-gradient(to right, #c7c7c7 , #aaaaaa)",size:"normal",block:!0},on:{click:t.notReciveCNYBtn}},[t._v("我没收到款 请对方上传付款凭证")])],1):t._e(),a("div",{staticClass:"margT10"},[a("van-button",{attrs:{color:"linear-gradient(to right, #c7c7c7 , #aaaaaa)",size:"normal",block:!0},on:{click:function(e){return t.complain(t.detail4buyerInfo)}}},[t._v("诉讼")])],1),a("div",{staticClass:"margT10 tip4model3",domProps:{innerHTML:t._s(t.$api.tipText)}})],1):t._e()]),a("van-action-sheet",{attrs:{title:"温馨提示"},model:{value:t.showSureCancelTransactionModel4seller,callback:function(e){t.showSureCancelTransactionModel4seller=e},expression:"showSureCancelTransactionModel4seller"}},[a("div",{staticClass:"cancelSellTip"},[a("div",{staticClass:"tipText2"},[t._v("若买方在30分钟内没付款，且联系无果，卖方可取消交易。若买方正有事情在忙，锁定了交易，则交易时间延长30分钟。")]),"知道了"==t.cancelSellSureBtnText?a("div",{staticClass:"countDownTimeBox margT20 clear hidden"},[a("div",{staticClass:"flexCountTime"},[t._v("可取消倒计时：")]),a("div",{staticClass:"flexCountTime"},[a("van-count-down",{attrs:{time:t.setCountDownTime4seller}})],1)]):t._e()]),a("div",{staticClass:"sureAppointBtnBox"},[a("van-button",{attrs:{color:"linear-gradient(to right, #ffae00 , #ff8400)",size:"normal",block:!0},on:{click:t.cancel4seller}},[t._v(t._s(t.cancelSellSureBtnText))])],1)]),a("van-action-sheet",{attrs:{title:"温馨提示"},model:{value:t.showSureCancelTransactionModel4buyer,callback:function(e){t.showSureCancelTransactionModel4buyer=e},expression:"showSureCancelTransactionModel4buyer"}},[a("div",{staticClass:"cancelSellTip"},[a("div",{staticClass:"tipText2"},[t._v("为了避免买方随意取消交易而导致扰乱市场的现象，经平台研究决定，买方主动取消交易或因超时未打款而被动取消交易，要减0.2~0.5个贡献值。若卖方实名信息不符或者有其他问题，请向平台诉讼，让客服来处理单子并免费帮您取消交易。")])]),a("div",{staticClass:"sureAppointBtnBox"},[a("van-button",{attrs:{loading:t.sureCancelBtnLoading,"loading-type":"spinner",color:"linear-gradient(to right, #ffae00 , #ff8400)",size:"normal",block:!0},on:{click:t.cancel4buyer}},[t._v("确认取消")])],1)]),a("van-dialog",{attrs:{title:"诉讼的理由","show-cancel-button":""},on:{confirm:t.submitComplainBtn},model:{value:t.showComplainDialog,callback:function(e){t.showComplainDialog=e},expression:"showComplainDialog"}},[a("div",{staticClass:"remark"},[a("van-field",{attrs:{rows:"2",autosize:"",type:"textarea",maxlength:"100",placeholder:"请填写理由,让平台找到线索好介入调查","show-word-limit":""},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1)]),a("van-action-sheet",{attrs:{title:"卖家信息"},model:{value:t.showSellerUserInfoModel,callback:function(e){t.showSellerUserInfoModel=e},expression:"showSellerUserInfoModel"}},[a("div",{staticClass:"box box2"},[a("div",{staticClass:"flex flex1"},[a("div",{staticClass:"value",on:{click:function(e){return t.toBookView("1",t.sellerUserInfo.userId)}}},[t._v(t._s(t.sellerUserInfo.teamCalculationPower))]),a("div",{staticClass:"text"},[t._v("团队算力")])]),a("div",{staticClass:"flex flex4"},[a("div",{staticClass:"value",on:{click:function(e){return t.toBookView("2",t.sellerUserInfo.userId)}}},[t._v(t._s(t.sellerUserInfo.platformTicket))]),a("div",{staticClass:"text"},[t._v("帮扶券")])]),a("div",{staticClass:"flex flex2"},[a("div",{staticClass:"value",on:{click:function(e){return t.toBookView("4",t.sellerUserInfo.userId)}}},[t._v(t._s(t.sellerUserInfo.thisWeekMineral))]),a("div",{staticClass:"text"},[t._v("矿石")])])]),a("div",{staticClass:"box box3"},[a("div",{staticClass:"flex flex1"},[a("div",[t._v(t._s(t.sellerUserInfo.myCalculationPower))]),a("div",{staticClass:"text"},[t._v("TA的算力")])]),a("div",{staticClass:"flex flex4"},[a("div",[t._v(t._s(t.sellerUserInfo.temporaryFreezePlatformTicket))]),a("div",{staticClass:"text"},[t._v("交易中"),a("br"),t._v("帮扶券")])]),a("div",{staticClass:"flex flex2"},[a("div",[t._v(t._s(t.sellerUserInfo.temporaryFreezeMineral))]),a("div",{staticClass:"text"},[t._v("交易中"),a("br"),t._v("矿石")])])]),a("div",{staticClass:"margT10"},[a("van-button",{attrs:{color:"linear-gradient(to right, #ffae00 , #ff8400)",size:"normal",block:!0},on:{click:function(e){return t.lookThisBook(t.sellerUserInfo.userId)}}},[t._v("查看对方账本")])],1),a("div",{staticClass:"margT10"},[a("van-button",{attrs:{color:"linear-gradient(to right, #c7c7c7 , #aaaaaa)",size:"normal",block:!0},on:{click:function(e){return t.complain(t.sellerUserInfo)}}},[t._v("诉讼")])],1),a("div",{staticClass:"placeholderLine10"})]),a("van-dialog",{attrs:{title:"问题小帮手",confirmButtonText:"好的"},model:{value:t.showTipModel,callback:function(e){t.showTipModel=e},expression:"showTipModel"}},[a("div",{staticClass:"paddingWing f-12 lineHeight tip4model2 textJustify"},[a("div",{staticClass:"textIndent"},[t._v(" 单子匹配后，请卖家耐心等待30分钟，若买方在30分钟内没付款，也没锁定交易，卖方可取消交易。单子匹配后，买家若当时在忙没时间付款，可先锁定交易，锁定交易后，可延长30分钟的交易时间，锁定交易后买方若在匹配后的1小时内没付款，卖方亦可取消交易。（注：买方若是要通过微信所绑定的手机号转账，请卖方在微信中的'"),a("b",[t._v("支付-支付管理")]),t._v("'中开通'"),a("b",[t._v("允许通过手机号向我转账")]),t._v("'的功能）。 ")])])]),a("van-dialog",{attrs:{title:"系统提示","show-confirm-button":!1},model:{value:t.showSendSMSTipModel,callback:function(e){t.showSendSMSTipModel=e},expression:"showSendSMSTipModel"}},[a("div",{staticClass:"sendMessageBox"},[a("div",{staticClass:"placeholderLine10"}),a("div",{staticClass:"tip4model3 paddingWing textIndent"},[t._v(" "+t._s(t.sendSmsTipText)+" ")]),a("div",{staticClass:"placeholderLine10"}),a("div",{staticClass:"myCell"},[a("van-field",{attrs:{label:"对方手机号",clearable:"",disabled:""},model:{value:t.mobilePhone,callback:function(e){t.mobilePhone=e},expression:"mobilePhone"}})],1),a("van-cell-group",[a("van-field",{attrs:{label:"短信内容",rows:"2",required:"",autosize:"",clearable:"",type:"textarea",maxlength:"100",placeholder:"请输入短信内容(不超过100字)","show-word-limit":""},model:{value:t.smsContent,callback:function(e){t.smsContent=e},expression:"smsContent"}})],1),a("div",{staticClass:"placeholderLine10"}),a("van-button",{attrs:{type:"primary",size:"normal",block:!0},on:{click:t.toSendPage}},[t._v("一键发送")]),a("div",{staticClass:"placeholderLine10"}),a("van-button",{attrs:{type:"info",size:"normal",block:!0},on:{click:function(e){return t.handleCopy(t.smsContent,e)}}},[t._v("我是对方好友 复制该短信内容")])],1)]),a("m-refresh",{on:{refreshEvent:t.refreshEvent}})],1)},i=[],l=(a("99af"),a("b680"),a("ac1f"),a("5319"),a("0418")),n=a("1cff"),o=a("8673"),c=a("c8f1"),r=a("6f45"),d=a.n(r),u=a("2241"),v=a("d399"),p={data:function(){return{sendSmsTipText:"订单匹配成功，为了让交易顺利进行，请给买家发个短信提醒。",mobilePhone:"",sendSmsHref:"",smsContent:"",showSendSMSTipModel:!1,showTipModel:!1,sureCancelBtnLoading:!1,showComplainDialog:!1,remark:"",pen:"",uploadPicBase64:"",buyerHaveWord:"买方有话说：您好，我已锁定订单，请稍等片刻，我会尽快付款。",tipText:"<b class='textBold'>温馨提示：</b><br>1.单子一旦匹配，请卖方务必【发送短信提醒】，然后耐心等待30分钟，若买方在30分钟内没付款，也没锁定交易，卖方可取消交易。<br>2.单子匹配后，买方若当时在忙没时间付款，可先通过【锁定交易】来延长30分钟交易时间，锁定交易后买方若在匹配后的1小时内没付款，卖方亦可取消交易。<br>（注：买方若是要通过微信所绑定的手机号转账，请卖方预先在微信中的【支付-支付管理】中开通【允许通过手机号向我转账】的功能）",tipText4AppointDeal:"",activeName:"pay",pageCount:1e3,totalItems:1e4,mcTime:"2019-10-16 15:30:12",setCountDownTime4seller:108e6,countDownTimeBoxIsShow:!0,showSureCancelTransactionModel4seller:!1,showSureCancelTransactionModel4buyer:!1,showSellerUserInfoModel:!1,showSellerDetailModel:!1,showBuyerDetailModel:!1,showAgentDetailModel:!1,cancelSellSureBtnText:"知道了",currentPage1:1,currentPage2:1,currentPage3:1,currentPage4:1,currentPage5:1,pageSize:10,loading:!0,loading1:!1,finished1:!1,loading2:!1,finished2:!1,loading3:!1,finished3:!1,loading4:!1,finished4:!1,loading5:!1,finished5:!1,list1:[],list2:[],list3:[],list4:[],list5:[],appointDealDetail:"",detail4buyerInfo:"",sellerUserInfo:"",detail4sellerInfo:"",userId:"",transactionBuyerId:"",transactionId:"",toast:"",phoneType:"",type:2,guidancePrice:""}},components:{mHeader:l["a"],mFullscreen:n["a"],mRefresh:o["a"]},computed:{getGuidancePrice:function(){var t=this,e=t.appointDealDetail.assistAppointDealInfo.num*t.appointDealDetail.assistAppointDealInfo.curerntPlatformPrice;return t.guidancePrice=e.toFixed(2),t.guidancePrice}},created:function(){var t=this;t.userId=t.$cookies.get("userId"),t.$utils.isNUll(t.userId)&&(t.$toast(t.$api.loginAgainTipText),t.$router.replace("login")),t.$cookies.set("isRefreshUserInfo",1,t.$api.cookiesTime),t.initializeTabActiveName(),t.$route.query.mobilePhone&&(t.mobilePhone=t.$route.query.mobilePhone,1==t.$route.query.dealType?t.$route.query.isSelf?(t.sendSmsTipText="订单匹配成功，为了让交易顺利进行，请给对方发个短信提醒。不然交易取消后可能会扣卖家0.5贡献值",t.smsContent="【".concat(t.$api.projectName,"】我所转让的").concat(t.$route.query.num,"个矿石已经匹配到了您，请在“我的--我的交易--待付款”的订单详情中查看并及时完成交易。")):(t.sendSmsTipText="订单匹配成功，为了让交易顺利进行，请提醒代理审核单子。",t.smsContent="【".concat(t.$api.projectName,"】我的定向交易单子选择了您做担保，请审核，谢谢。")):(t.sendSmsTipText="订单匹配成功，为了让交易顺利进行，请给对方发个短信提醒。不然交易取消后可能会扣卖家0.5贡献值",t.smsContent="【".concat(t.$api.projectName,"】我所转让的").concat(t.$route.query.num,"个矿石已经匹配到了您，请在“我的--我的交易--待付款”的订单详情中查看并及时完成交易。")),t.setSendSmsHref(t.mobilePhone,t.smsContent),t.showSendSMSTipModel=!0),t.bsTip()},methods:{back:function(){this.$router.push("my")},bsTip:function(){var t=this,e=t.$utils.isWeixin();e&&u["a"].alert({title:"系统提示",message:t.$api.bsTip}).then((function(){}))},showTip:function(){this.showTipModel=!0},lookThisBook:function(t){this.$router.push({path:"lookBook",query:{lookUserId:t}})},toBookView:function(t,e){var a=this,s="mineral";1==t?s="calculation":2==t?s="ticket":3==t?s="contribution":4==t&&(s="mineral"),a.$cookies.set("tab_name_book",s,a.$api.cookiesTime),a.$router.push({path:"lookBook",query:{lookUserId:e}})},toScrollTop:function(){window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0},tagColor:function(t){var e=this;return t.buyerId==e.userId?"tag4Buy":"tag4Sell"},uploadBtn:function(){var t=this;u["a"].confirm({title:"提示信息",confirmButtonText:"确定",message:"您确定上传以上付款凭证么？"}).then((function(){t.showBuyDetailModel=!1})).catch((function(){}))},uploadIMG:function(t){var e=this;e.toast=v["a"].loading({duration:3e3,closeOnClickOverlay:!0,message:"正在解析图片"});var a=t.target.files||t.dataTransfer.files;a.length&&(a[0].size/1024/1024>7?e.$toast("上传图片大小不能超过 7MB"):(e.toast.message="正在获取图片",e.imgPreview(a[0])))},imgPreview:function(t){var e=this;e.toast.message="正在压缩图片";var a=null;if(!t||!window.FileReader)return!1;if(/^image/.test(t.type)){d.a.getData(t,(function(){d.a.getAllTags(this),a=d.a.getTag(this,"Orientation")}));var s=new FileReader;s.readAsDataURL(t),s.onloadend=function(t){var s=this.result,i=new Image;i.src=s,i.onload=function(){var t=this.naturalWidth,s=this.naturalHeight,l=document.createElement("canvas"),n=l.getContext("2d");if(l.width=t,l.height=s,a&&""!=a&&1!=a){var o=0;switch(a){case 6:o=90,l.width=s,l.height=t,n.translate(s/2,t/2),n.rotate(o*Math.PI/180),n.translate(-t/2,-s/2),n.drawImage(i,0,0,t,s);break;case 8:o=-90,l.width=s,l.height=t,n.translate(s/2,t/2),n.rotate(o*Math.PI/180),n.translate(-t/2,-s/2),n.drawImage(i,0,0,t,s);break;case 3:o=-180,n.rotate(o*Math.PI/180),n.drawImage(i,-t,-s,t,s);break}}else n.drawImage(i,0,0,t,s);var c=l.toDataURL("image/png"),r=new Image;r.src=c,r.onload=function(){var t=e.$utils.compress(r,.4),a={imgUrl:t,id:e.id};e.toast.message="正在上传图片",e.$ajax.ajax(e.$api.updateTransactionImgUrlById,"POST",a,(function(t){t.code==e.$api.CODE_OK&&(e.toast.message="图片上传成功",e.toast.icon="success",e.sendSmsTipText="图片上传成功，为了让交易顺利进行，请给卖家发个短信提醒。",2==e.type?e.mobilePhone=e.appointDealDetail.assistAppointAgentInfo.mobilePhone:e.mobilePhone=e.detail4sellerInfo.mobilePhone,e.smsContent="【".concat(e.$api.projectName,"】我的付款凭证已上传，请在“我的--我的交易--待收款”的订单详情中查看。"),e.setSendSmsHref(e.mobilePhone,e.smsContent),e.showSellerDetailModel=!1,e.onLoad2())}))}}}}},buyOrSell:function(t){var e=this;return t.buyerId==e.userId?"buy":"sell"},maxPrice:function(t){return(t.maxNumber*t.price).toFixed(2)},totalPrice:function(t){return(t.num*t.price).toFixed(2)},sellerGet:function(t){return(.97*t.assurePrice).toFixed(2)},agentGet:function(t){return(.03*t.assurePrice).toFixed(2)},initializeTabActiveName:function(){var t=this;t.$cookies.isKey("tabName4MyDeal")&&(t.activeName=t.$cookies.get("tabName4MyDeal"))},onLoad1:function(){var t=this;t.$ajax.ajax(t.$api.getAssistBuyBillListByBuyerId,"GET",null,(function(e){e.code==t.$api.CODE_OK&&(t.list1=e.data,t.loading1=!1,t.finished1=!0),t.loading=!1}))},onLoad2:function(){var t=this;t.$cookies.set("isRefreshUserInfo",1,t.$api.cookiesTime),t.$ajax.ajax(t.$api.getAssistTransactionList4buyer,"GET",null,(function(e){e.code==t.$api.CODE_OK&&(t.list2=e.data,t.loading2=!1,t.finished2=!0),t.loading=!1}))},onLoad4:function(){var t=this;t.$ajax.ajax(t.$api.getAssistTransactionList4sellerByUserId,"GET",null,(function(e){e.code==t.$api.CODE_OK&&(t.list4=e.data,t.loading4=!1,t.finished4=!0),t.loading=!1}))},onLoad3:function(){var t=this;t.$cookies.set("isRefreshUserInfo",1,t.$api.cookiesTime),t.$ajax.ajax(t.$api.getAssistTransactionList4ComplateByUserId,"GET",null,(function(e){e.code==t.$api.CODE_OK&&(t.list3=e.data,t.loading3=!1,t.finished3=!0),t.loading=!1}))},onLoad5:function(){var t=this;t.$ajax.ajax(t.$api.getAssistTransactionList4CancelByUserId,"GET",null,(function(e){e.code==t.$api.CODE_OK&&(t.list5=e.data,t.loading5=!1,t.finished5=!0),t.loading=!1}))},handleCopy:function(t,e){var a=this;a.showSendSMSTipModel=!1,Object(c["a"])(t,e,(function(t){a.$toast("复制成功")}))},lockTransactionBtn:function(t){var e=this;e.id=t.id,u["a"].confirm({title:"确认信息",confirmButtonText:"确定",message:"锁定交易可延长30分钟自动取消订单的时间，您是否确定要锁定交易？"}).then((function(){var t={status:1,id:e.id};e.$ajax.ajax(e.$api.updateTransactionStatusById,"POST",t,(function(t){t.code==e.$api.CODE_OK?1==t.data&&e.onLoad2():e.$toast(t.message)}))})).catch((function(){}))},cancelDeal4OverTime:function(){var t=this,e={id:t.id};t.$ajax.ajax(t.$api.cancelAssistTransactionById,"POST",e,(function(e){e.code==t.$api.CODE_OK?1==e.data&&(u["a"].alert({title:"提示信息",confirmButtonText:"已经知晓",message:"由于您超时未付款，已超过付款时间，该买单已被系统自动取消！"}).then((function(){})).catch((function(){})),t.onLoad2()):t.$toast(e.message)}))},cancelBuyBillBtn:function(t){var e=this;e.id=t.id,t.canCancelTime<e.$utils.getDateTime(new Date)&&(0==t.status||1==t.status)?e.cancelDeal4OverTime():u["a"].confirm({title:"确认信息",confirmButtonText:"确定",message:"买家您是否确定要撤销此买单？"}).then((function(){var t={id:e.id};e.$ajax.ajax(e.$api.deleteBuyBillById,"POST",t,(function(t){t.code==e.$api.CODE_OK&&1==t.data&&(e.$toast("撤销成功"),e.onLoad1())}))})).catch((function(){}))},complain:function(){var t=this;t.showComplainDialog=!0},submitComplainBtn:function(){var t=this,e={remark:t.remark,id:t.id};t.$utils.hasNull(e)?t.$toast("请填写理由"):t.$ajax.ajax(t.$api.updateTransactionStatus5ById,"POST",e,(function(e){e.code==t.$api.CODE_OK&&1==e.data&&(t.$toast("诉讼成功"),t.onLoad2(),t.showSellerDetailModel=!1,t.onLoad4(),t.showBuyerDetailModel=!1,t.showSellerUserInfoModel=!1)}))},cancelDealBtn:function(t){var e=this;e.id=t.id;var a=e.buyOrSell(t);"sell"==a?(e.setCountDownTime(t.canCancelTime),e.showSureCancelTransactionModel4seller=!0):"buy"==a&&(e.showSureCancelTransactionModel4buyer=!0)},cancel4seller:function(){var t=this;if("知道了"==t.cancelSellSureBtnText)t.showSureCancelTransactionModel4seller=!1;else{var e={id:t.id};t.sureCancelBtnLoading=!0,t.$ajax.ajax(t.$api.cancelAssistTransactionById,"POST",e,(function(e){t.sureCancelBtnLoading=!1,e.code==t.$api.CODE_OK?1==e.data&&(t.showAgentDetailModel=!1,t.$toast("已成功取消"),t.showSureCancelTransactionModel4seller=!1,t.onLoad4(),t.$cookies.set("isRefreshUserInfo",1,t.$api.cookiesTime)):t.$toast(e.message)}))}},cancel4buyer:function(){var t=this,e={id:t.id};t.sureCancelBtnLoading=!0,t.$ajax.ajax(t.$api.cancelAssistTransactionById,"POST",e,(function(e){t.sureCancelBtnLoading=!1,e.code==t.$api.CODE_OK?1==e.data&&(t.showAgentDetailModel=!1,t.$toast("已成功取消"),t.showSureCancelTransactionModel4buyer=!1,t.showSellerDetailModel=!1,t.onLoad2()):t.$toast(e.message)}))},showSellerInfoBtn:function(t){var e=this;e.showSellerUserInfoModel=!0,e.id=t.id;var a={id:t.id};e.$ajax.ajax(e.$api.getAssistSellerUserInfoByTransactionId,"GET",a,(function(t){t.code==e.$api.CODE_OK&&t.data&&(e.sellerUserInfo=t.data)}))},refreshEvent:function(){var t=this;t.loading=!0,"buy"==t.activeName?t.onLoad1():"pay"==t.activeName?t.onLoad2():"get"==t.activeName?t.onLoad4():"complated"==t.activeName?t.onLoad3():"canceled"==t.activeName&&t.onLoad5()},tabChange:function(t,e){var a=this;this.$cookies.set("tabName4MyDeal",t,3600),"pay"!=t&&"complated"!=t||a.$cookies.set("isRefreshUserInfo",1,a.$api.cookiesTime),a.activeName=t},showDetailBtn:function(t){var e=this;e.type=t.type,e.id=t.id;var a=e.buyOrSell(t),s={id:e.id};if(2==t.type){if("get"==e.activeName)e.showAgentDetailModel=!0,e.$ajax.ajax(e.$api.getAssistAppointDealDetailById,"GET",s,(function(t){t.code==e.$api.CODE_OK&&(e.appointDealDetail=t.data)}));else if("pay"==e.activeName){if(t.canCancelTime<e.$utils.getDateTime(new Date)&&(0==t.status||1==t.status))return void e.cancelDeal4OverTime();e.showAgentDetailModel=!0,e.$ajax.ajax(e.$api.getAssistAppointDealDetailById,"GET",s,(function(t){if(t.code==e.$api.CODE_OK){e.appointDealDetail=t.data,11==e.appointDealDetail.assistAppointDealInfo.status&&u["a"].alert({title:"系统提示",message:"卖家信息正在审核中，请稍后操作...审核完毕代理会通知您，若等不及可直接联系订单详情中的代理询问审核情况"}).then((function(){}));var a=e.$utils.getDateTime(new Date);e.appointDealDetail.assistAppointDealInfo.letSureTime&&e.appointDealDetail.assistAppointDealInfo.letSureTime<a&&u["a"].confirm({title:"提示信息",confirmButtonText:"需要",message:"由于卖家30分钟内没确认，已经超过确认时间，请问需要系统此刻帮您确认吗？"}).then((function(){e.letSureByBuyer()})).catch((function(){}))}}))}}else if("sell"==a){var i={id:e.id};e.showBuyerDetailModel=!0,e.$ajax.ajax(e.$api.getAssistBuyerInfoByTransactionId,"GET",i,(function(t){t.code==e.$api.CODE_OK&&(t.data?e.detail4buyerInfo=t.data:e.onLoad2())}))}else if("buy"==a){if(t.canCancelTime<e.$utils.getDateTime(new Date)&&(0==t.status||1==t.status))return void e.cancelDeal4OverTime();var l={id:e.id};e.showSellerDetailModel=!0,e.$ajax.ajax(e.$api.getAssistSellerInfoByTransactionId,"GET",l,(function(t){t.code==e.$api.CODE_OK&&(t.data?(e.detail4sellerInfo=t.data,0==e.detail4sellerInfo.status?u["a"].alert({title:"温馨提示",confirmButtonText:"锁定交易",message:"为了让交易顺利进行，查看详情之前需先锁定交易，锁定后可延长30分钟自动取消交易的时间！"}).then((function(){var t={status:1,id:e.id};v["a"].loading({message:"锁定中...",forbidClick:!0,loadingType:"spinner"}),e.$ajax.ajax(e.$api.updateTransactionStatusById,"POST",t,(function(t){v["a"].clear(),t.code==e.$api.CODE_OK&&1==t.data&&(e.onLoad2(),e.getSellerInfoByTransactionId())}))})).catch((function(){})):e.getSellerInfoByTransactionId()):e.onLoad2())}))}},getSellerInfoByTransactionId:function(){var t=this,e={id:t.id};t.showSellerDetailModel=!0,t.$ajax.ajax(t.$api.getAssistSellerInfoByTransactionId,"GET",e,(function(e){if(e.code==t.$api.CODE_OK)if(e.data){t.detail4sellerInfo=e.data;var a=t.$utils.getDateTime(new Date);t.detail4sellerInfo.letSureTime&&t.detail4sellerInfo.letSureTime<a&&u["a"].confirm({title:"提示信息",confirmButtonText:"需要",message:"由于卖家30分钟内没确认，已经超过确认时间，请问需要系统此刻帮您确认吗？"}).then((function(){t.letSureByBuyer()})).catch((function(){}))}else t.onLoad2()}))},letSureByBuyer:function(){var t=this,e={status:8,id:t.id};t.$ajax.ajax(t.$api.updateTransactionStatusById,"POST",e,(function(e){e.code==t.$api.CODE_OK&&1==e.data&&(t.showAgentDetailModel=!1,t.showSellerDetailModel=!1,t.$toast("确认成功"),t.$cookies.set("isRefreshUserInfo",1,t.$api.cookiesTime),t.onLoad2())}))},notReciveCNYBtn:function(){var t=this;u["a"].confirm({title:"提示信息",confirmButtonText:"确定",message:"请先去支付宝或微信确认是否收到款，您确定没收到款？"}).then((function(){t.showSellerDetailModel=!1;var e={status:3,id:t.id};t.$ajax.ajax(t.$api.updateTransactionStatusById,"POST",e,(function(e){e.code==t.$api.CODE_OK&&1==e.data&&(t.sendSmsTipText="提交未收到款状态成功，为了让交易顺利进行，请给卖家发个短信要求对方上传付款凭证。",2==t.type?t.mobilePhone=t.appointDealDetail.assistAppointAgentInfo.mobilePhone:t.mobilePhone=t.detail4buyerInfo.mobilePhone,t.smsContent="【".concat(t.$api.projectName,"】您好，我并未收到款，请在“我的--我的交易--待付款”的订单详情中上传付款凭证。"),t.setSendSmsHref(t.mobilePhone,t.smsContent),t.showBuyerDetailModel=!1,t.onLoad4())}))})).catch((function(){}))},letMineralBtn:function(){var t=this;u["a"].confirm({title:"提示信息",message:"请先查看您的支付宝或微信，确认已经收到款后再放矿石！",cancelButtonText:"先去查看",confirmButtonText:"确认已收到"}).then((function(){var e={status:8,id:t.id};t.$ajax.ajax(t.$api.updateTransactionStatusById,"POST",e,(function(e){t.showBuyerDetailModel=!1,e.code==t.$api.CODE_OK?1==e.data&&(t.showAgentDetailModel=!1,t.sendSmsTipText="交易已经顺利完成！请最后告知对方您已经确认收款并释放矿石。",2==t.type?t.mobilePhone=t.appointDealDetail.assistAppointDealBuyerInfo.mobilePhone||t.appointDealDetail.assistAppointAgentInfo.mobilePhone:t.mobilePhone=t.detail4buyerInfo.mobilePhone,t.smsContent="【".concat(t.$api.projectName,"】我已经确认收款并释放矿石，谢谢。"),t.setSendSmsHref(t.mobilePhone,t.smsContent),t.$cookies.set("isRefreshUserInfo",1,t.$api.cookiesTime),t.onLoad4()):t.$toast(e.message)}))})).catch((function(){}))},setSendSmsHref:function(t,e){var a=this,s=a.$utils.isIphoneOrAndroid();if("a"==s)a.sendSmsHref="sms:".concat(t,"?body=").concat(e);else if("i"==s){var i=encodeURI(e);a.sendSmsHref="sms:".concat(t,"&body=").concat(i)}else a.sendSmsHref="sms:".concat(t,"?body=").concat(e);a.showSendSMSTipModel=!0},toSendPage:function(){var t=this;t.showSendSMSTipModel=!1,window.location.href=t.sendSmsHref},payedBtn:function(){var t=this;u["a"].confirm({title:"提示信息",confirmButtonText:"确定",message:"您确定已经付款？若没付款，对方可以驳回并要求上传付款凭证！"}).then((function(e){var a={status:2,id:t.id};t.$ajax.ajax(t.$api.updateTransactionStatusById,"POST",a,(function(e){e.code==t.$api.CODE_OK&&1==e.data&&(t.showSendSMSTipModel=!0,0==t.type||1==t.type||3==t.type?(t.sendSmsTipText="提交已付款状态成功，为了让交易顺利进行，请发个短信提醒对方确认收款并释放矿石。",t.mobilePhone=t.detail4sellerInfo.mobilePhone,t.smsContent="【".concat(t.$api.projectName,"】我已付款，请确认收款，并在“我的--我的交易--待收款”的订单详情中确认收款并释放矿石，谢谢。"),t.setSendSmsHref(t.mobilePhone,t.smsContent),t.showSellerDetailModel=!1):2==t.type&&(t.sendSmsTipText="提交已付款状态成功，为了让交易顺利进行，请发个信息提醒对方确认收款并释放矿石。",t.mobilePhone=t.appointDealDetail.assistAppointAgentInfo.mobilePhone,t.smsContent="【".concat(t.$api.projectName,"】我已付款，请确认收款并释放矿石，谢谢。"),t.setSendSmsHref(t.mobilePhone,t.smsContent),t.showAgentDetailModel=!1),t.onLoad2())}))})).catch((function(){}))},setCountDownTime:function(t){var e=this,a=e.$utils.getTime(t),s=e.$utils.getTime(new Date);e.setCountDownTime4seller=a-s,e.setCountDownTime4seller<=0&&(e.cancelSellSureBtnText="确认取消")},setLetSureDownTime:function(t){var e=this,a=e.$utils.getTime(t),s=e.$utils.getTime(new Date);return a-s},setCancelDealDownTime:function(t){var e=this,a=e.$utils.getTime(t),s=e.$utils.getTime(new Date);return a-s}}},f=p,m=(a("e38c"),a("2877")),C=Object(m["a"])(f,s,i,!1,null,null,null);e["default"]=C.exports},ab91:function(t,e,a){"use strict";var s=a("7111"),i=a.n(s);i.a},bbb7:function(t,e,a){},e38c:function(t,e,a){"use strict";var s=a("bbb7"),i=a.n(s);i.a}}]);