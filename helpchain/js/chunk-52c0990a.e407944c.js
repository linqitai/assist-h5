(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52c0990a"],{"0418":function(i,t,e){"use strict";var a=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"header-wrapper"},[i._t("default")],2)])},n=[],l={props:{msg:String},data:function(){return{active:0,boolTrue:!0}},created:function(){}},s=l,o=(e("521e"),e("2877")),c=Object(o["a"])(s,a,n,!1,null,"5dfa2afe",null);t["a"]=c.exports},"4dea":function(i,t,e){},"51a6":function(i,t,e){},"521e":function(i,t,e){"use strict";var a=e("51a6"),n=e.n(a);n.a},"6bc5":function(i,t,e){"use strict";var a=e("4dea"),n=e.n(a);n.a},"99af":function(i,t,e){"use strict";var a=e("23e7"),n=e("d039"),l=e("e8b5"),s=e("861d"),o=e("7b0b"),c=e("50c4"),r=e("8418"),d=e("65f0"),u=e("1dde"),f=e("b622"),p=e("2d00"),h=f("isConcatSpreadable"),v=9007199254740991,g="Maximum allowed index exceeded",m=p>=51||!n((function(){var i=[];return i[h]=!1,i.concat()[0]!==i})),M=u("concat"),_=function(i){if(!s(i))return!1;var t=i[h];return void 0!==t?!!t:l(i)},T=!m||!M;a({target:"Array",proto:!0,forced:T},{concat:function(i){var t,e,a,n,l,s=o(this),u=d(s,0),f=0;for(t=-1,a=arguments.length;t<a;t++)if(l=-1===t?s:arguments[t],_(l)){if(n=c(l.length),f+n>v)throw TypeError(g);for(e=0;e<n;e++,f++)e in l&&r(u,f,l[e])}else{if(f>=v)throw TypeError(g);r(u,f++,l)}return u.length=f,u}})},a4ff:function(i,t,e){"use strict";e.r(t);var a=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"myMillPage"},[e("m-header",[e("i",{staticClass:"leftBox iconfont iconfont-left-arrow",on:{click:i.back}}),e("div",{staticClass:"text"},[i._v(" 我的矿机 ")]),e("i",{staticClass:"iconfont iconfont-question rightBox icon",on:{click:i.showTip}})]),e("canvas",{staticClass:"matrix",attrs:{id:"matrix"}}),e("div",{staticClass:"millContent",attrs:{id:"millContent"}},[e("van-tabs",{attrs:{background:i.$api.tabBgColor,color:i.$api.tabActiveColor,"title-active-color":i.$api.tabActiveColor,"title-inactive-color":i.$api.tabTextColor,border:!1,animated:"",sticky:""},on:{change:i.tabChange},model:{value:i.activeName,callback:function(t){i.activeName=t},expression:"activeName"}},[e("van-tab",{attrs:{name:"myMill"}},[e("div",{staticClass:"tabTitle",attrs:{slot:"title"},slot:"title"},[i._v(" 我的矿机 "+i._s(i.myMillList.length)+" ")]),i.isShowOneReciept?e("div",{staticClass:"getMineral"},[e("van-button",{attrs:{type:"info",size:"normal",color:"linear-gradient(to right, #ffae00, #ff8400)",loading:i.getRecieptLoading,block:!0},on:{click:i.getReceipt}},[e("span",{staticClass:"letterSpacing"},[i._v("一键领取收益")])])],1):i._e(),e("van-list",{attrs:{finished:i.finishedMyMill,"finished-text":i.finishedMyMillText},on:{load:i.onLoadMyMill},model:{value:i.loadingMyMill,callback:function(t){i.loadingMyMill=t},expression:"loadingMyMill"}},[e("div",{staticClass:"millList"},i._l(i.myMillList,(function(t){return e("div",{key:t.id,staticClass:"item"},[e("div",{staticClass:"flex flex2"},[e("div",{staticClass:"line1"},[e("div",{staticClass:"millName inline"},[i._v(i._s(i._f("machineTypeType")(t.type)))]),e("div",{staticClass:"inline calcullatePower"},[i._v("算力 "+i._s(t.calculationPower)+"GH/s")])]),t.turnOffTime?e("div",{staticClass:"line"},[i._v(i._s(t.turnOffTime)+" 到期")]):i._e(),e("div",{staticClass:"line"},[i._v("租金 "+i._s(t.price)+"矿石")]),e("div",{staticClass:"line"},[i._v("总产 "+i._s(t.totalOutput)+"矿石")]),e("div",{staticClass:"line"},[i._v("已产 "+i._s(t.alreadyGet)+"矿石")]),e("div",{staticClass:"line"},[i._v("总运行时长 "+i._s(t.allRuntime)+"小时")]),t.beforeReceipt?e("div",{staticClass:"line"},[i._v("下次领取 "+i._s(i.nextReceipt(t.beforeReceipt))+" 之后")]):i._e(),t.beforeReceipt?i._e():e("div",{staticClass:"line"},[t.turnOnTime?e("span",[i._v("下次领取 "+i._s(i.nextReceipt(t.turnOnTime))+" 之后")]):i._e()])]),e("div",{staticClass:"flex flex3"},[e("div",{staticClass:"status line"},[i._v(i._s(i._f("machineStatus")(t.status)))]),e("div",{staticClass:"line margT3"},[1==t.status?e("van-button",{attrs:{round:"",type:"info",size:"small",color:"linear-gradient(to right, #099eee, #0b6fcc)",block:!0},on:{click:function(e){return i.toMillDetailPage(t)}}},[i._v("详情")]):i._e(),0==t.status?e("van-button",{attrs:{round:"",type:"info",loading:i.isRunMillBtnLoading,size:"small",color:"linear-gradient(to right, #ffae00, #ff8400)",block:!0},on:{click:function(e){return i.runMillEvent(t.id)}}},[i._v("运行")]):i._e()],1)]),e("i",{staticClass:"tagIcon iconfont iconfont-tag",class:i.tagColor(t.tag)}),e("i",{staticClass:"tagIconText"},[i._v(i._s(i._f("machineTagIconTextType")(t.tag)))])])})),0)])],1),e("van-tab",{attrs:{name:"pastMill"}},[e("div",{staticClass:"tabTitle",attrs:{slot:"title"},slot:"title"},[i._v(" 过期矿机 "+i._s(i.pastMillList?i.pastMillList.length:"")+" ")]),e("van-list",{attrs:{offset:100,finished:i.finishedPastMill,"finished-text":"没有更多了"},on:{load:i.onLoadPastMill},model:{value:i.loadingPastMill,callback:function(t){i.loadingPastMill=t},expression:"loadingPastMill"}},[e("div",{staticClass:"millList"},i._l(i.pastMillList,(function(t){return e("div",{key:t.id,staticClass:"item"},[e("div",{staticClass:"flex flex2"},[e("div",{staticClass:"line1"},[e("div",{staticClass:"millName inline"},[i._v(i._s(i._f("machineTypeType")(t.type)))]),e("div",{staticClass:"status inline"},[i._v(i._s(i._f("machineStatus")(t.status)))]),e("div",{staticClass:"calcullatePower inline"},[i._v("算力 "+i._s(t.calculationPower)+"GH/s")])]),e("div",{staticClass:"line"},[i._v("租金 "+i._s(t.price)+"矿石")]),e("div",{staticClass:"line"},[i._v("总产 "+i._s(t.totalOutput)+"矿石")]),e("div",{staticClass:"line"},[i._v("已产 "+i._s(t.alreadyGet)+"矿石")]),e("div",{staticClass:"line"},[i._v("总运行时长 "+i._s(t.allRuntime)+"小时")]),t.turnOnTime?e("div",{staticClass:"line"},[i._v("开机时间 "+i._s(t.turnOnTime))]):i._e(),t.turnOffTime?e("div",{staticClass:"line"},[i._v("到期时间 "+i._s(t.turnOffTime))]):i._e(),t.beforeReceipt?e("div",{staticClass:"line"},[i._v("上次领取 "+i._s(t.beforeReceipt))]):i._e()]),e("i",{staticClass:"tagIcon iconfont iconfont-tag",class:i.tagColor(t.tag)}),e("i",{staticClass:"tagIconText"},[i._v(i._s(i._f("machineTagIconTextType")(t.tag)))])])})),0)])],1)],1)],1),e("van-dialog",{attrs:{title:i.receiptModelTile,"show-confirm-button":i.isShowConfirmButton},model:{value:i.showReceiptTip,callback:function(t){i.showReceiptTip=t},expression:"showReceiptTip"}},[e("div",{staticClass:"placeholderLine20"}),e("div",{staticClass:"paddingWing textCenter"},[i.isShowReceiptLoading?e("van-loading",{attrs:{type:"spinner",color:"#1989fa"}}):i._e(),i.isShowMineralNum?e("div",{staticClass:"margT10 isShowMineralNum"},[i._v(i._s(i.mineralNumTip))]):i._e()],1),e("div",{staticClass:"placeholderLine20"}),e("div",{staticClass:"placeholderLine20"})]),e("van-dialog",{attrs:{title:"问题小帮手",confirmButtonText:"好的"},model:{value:i.showTipModel,callback:function(t){i.showTipModel=t},expression:"showTipModel"}},[e("div",{staticClass:"paddingWing f-12 lineHeight tip4model2"},[e("div",{staticClass:"textIndent"},[i._v(" 完成【我的--任务中心】里的任务后所奖励(赠送)的矿机不加算力，只有从矿机商城中所租赁的矿机才加算力。 ")])])])],1)},n=[],l=(e("99af"),e("4de4"),e("ac1f"),e("5319"),e("0418")),s=e("2241"),o=e("d399"),c={data:function(){return{isRunMillBtnLoading:!1,showTipModel:!1,activeName:"myMill",loadingMyMill:!1,finishedMyMill:!1,finishedMyMillText:"",myMillList:[],loadingMillShop:!1,finishedMillShop:!1,millShopList:[],loadingPastMill:!1,finishedPastMill:!1,pastMillList:[],miningMachine:[{miningMachineType:"小型矿机",price:100,totalOutput:12,allRuntime:720,turnOnTime:"2019-12-12 12:12:12",afterReceipt:"2019-12-13 12:12:12"}],userInfo:"",showReceiptTip:!1,isShowOneReciept:!0,isShowReceiptLoading:!0,mineralNumTip:"",isShowMineralNum:!1,receiptModelTile:"领取结果计算中",isShowConfirmButton:!1,getRecieptLoading:!1}},components:{mHeader:l["a"]},mounted:function(){var i=this,t=localStorage.getItem("_USERINFO_");if(!t)return i.$toast(i.$api.loginAgainTipText),void i.$router.replace("login");i.userInfo=JSON.parse(t),console.log(i.$cookies.get("isRefreshUserInfo"),"isRefreshUserInfo")},methods:{back:function(){this.$router.push("my")},showTip:function(){this.showTipModel=!0},startCodeRain:function(){var i=document.getElementById("matrix"),t=i.getContext("2d"),e=document.documentElement.scrollHeight||document.body.scrollHeight;i.height=e-50,console.log("matrix.height",i.height),i.width=window.innerWidth;for(var a=[],n=12,l=i.width/n,s=0;s<l;s++)a[s]=1;function o(){t.fillStyle="#277d1f",t.fillRect(0,0,i.width,i.height),t.fillStyle="#ffae00",t.font=n+"px";for(var e=0;e<l;e++)t.fillText(Math.floor(2*Math.random()),e*n,a[e]*n),a[e]*n>2*i.height/3&&Math.random()>.85&&(a[e]=0),a[e]++}setInterval(o,50)},tagColor:function(i){return 0==i?"tag0":1==i?"tag1":2==i?"tag2":3==i?"tag2":4==i?"tag2":5==i?"tag2":6==i?"tag2":void 0},nextReceipt:function(i){var t=this,e=new Date(i).getTime()/1e3+86400,a=t.$utils.getDateTime(1e3*e);return a},getReceipt:function(){var i=this;i.getRecieptLoading=!0,i.showReceiptTip=!0;var t=(new Date).getTime();console.log("_this.userInfo.lastReceiptTime",i.userInfo.lastReceiptTime);var e=new Date(i.userInfo.lastReceiptTime).getTime();console.log("lastReceiptTimestamp",e);var a=(t-e)/1e3;if(a<86400)return i.receiptModelTile="系统提示",i.isShowReceiptLoading=!1,i.mineralNumTip="未到领取收益时间",i.isShowMineralNum=!0,i.isShowConfirmButton=!0,void(i.getRecieptLoading=!1);i.$ajax.ajax(i.$api.getMyMachinesReceipt,"POST",null,(function(t){t.code==i.$api.CODE_OK?t.data?(i.mineralNumTip="此次领取收益为".concat(t.data,"个矿石"),i.onLoadMyMill(),i.$cookies.set("isRefreshUserInfo",1,i.$api.cookiesTime)):i.mineralNumTip="未到领取收益的时间":i.mineralNumTip="距离上次收益未满24小时"}),(function(){i.receiptModelTile="系统提示",i.isShowConfirmButton=!0,i.isShowReceiptLoading=!1,i.isShowMineralNum=!0,i.getRecieptLoading=!1}))},getThisMachineReceipt:function(i){if(i.beforeReceipt);else new Date},toMillDetailPage:function(i){var t=this;t.$router.push("myMillDetail"),localStorage.setItem("thisMillInfo",JSON.stringify(i))},runMillEvent:function(i){var t=this;t.isRunMillBtnLoading=!0,t.$ajax.ajax(t.$api.runMyMachineById+i,"POST",null,(function(i){i.code==t.$api.CODE_OK?t.onLoadMyMill():s["a"].alert({title:"系统提示",message:i.message}).then((function(){}))}),(function(){t.isRunMillBtnLoading=!1}))},buyMill:function(i){var t=this;s["a"].confirm({title:"确认弹窗",message:"您当前可用矿石".concat(t.userInfo.thisWeekMineral,"个,租赁此矿机要花").concat(i.price,"矿石,是否确定租赁？")}).then((function(){t.userInfo.thisWeekMineral<i.price?t.$toast(t.$api.DATA_102):t.sureBuyMillEvent(i.id)})).catch((function(){}))},sureBuyMillEvent:function(i){var t=this,e={machineId:i};o["a"].loading({message:"租赁中...",forbidClick:!0,loadingType:"spinner"}),t.$ajax.ajax(t.$api.insertAssistMyMachine,"POST",e,(function(i){if(o["a"].clear(),i.code==t.$api.CODE_OK){if(1e3==i.data)return void t.$toast(t.$api.DATA_100);if(1001==i.data)return void t.$toast(t.$api.DATA_101);if(1002==i.data)return void t.$toast(t.$api.DATA_102);s["a"].alert({title:"温馨提示",message:1==i.data?"租赁成功":"租赁失败"}).then((function(){1==i.data&&t.$cookies.set("isRefreshUserInfo",1,t.$api.cookiesTime),t.activeName="myMill",t.onLoadMyMill(),t.onLoadMillShop()}))}}))},onLoadMyMill:function(){var i=this;i.loadingMyMill=!0,i.$ajax.ajax(i.$api.getAssistMyMachine,"GET",null,(function(t){if(t.code==i.$api.CODE_OK){var e=t.data;i.myMillList=e.filter((function(i){return 2!=i.status})),i.pastMillList=e.filter((function(i){return 2==i.status})),i.myMillList.length>0?i.finishedMyMillText="没有更多了":(i.isShowOneReciept=!1,i.finishedMyMillText="亲，您目前没有矿机"),i.loadingMyMill=!1,i.finishedMyMill=!0,i.$nextTick((function(){i.startCodeRain()}),300)}}))},onLoadMillShop:function(){var i=this;i.$ajax.ajax(i.$api.getAssistMiningMachineList4MillShop,"GET",null,(function(t){if(t.code==i.$api.CODE_OK){var e=t.data;i.millShopList=e,i.loadingMillShop=!1,i.finishedMillShop=!0}}))},onLoadPastMill:function(){var i=this;i.loadingPastMill=!0,i.millShopCurrentPage=i.millShopCurrentPage+1,console.log("_this.millShopCurrentPage",i.millShopCurrentPage),setTimeout((function(){i.loadingPastMill=!1,i.finishedPastMill=!0}),500)},initializeTabActiveName:function(){var i=this;i.$cookies.isKey("mill_tab_name")&&(i.activeName=i.$cookies.get("mill_tab_name"))},tabChange:function(i,t){console.log(i,t),this.$cookies.set("mill_tab_name",i,3600)}}},r=c,d=(e("6bc5"),e("2877")),u=Object(d["a"])(r,a,n,!1,null,null,null);t["default"]=u.exports}}]);