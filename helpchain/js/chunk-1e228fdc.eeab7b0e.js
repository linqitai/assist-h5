(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e228fdc"],{"0418":function(e,r,a){"use strict";var t=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("div",{staticClass:"header"},[a("div",{staticClass:"header-wrapper"},[e._t("default")],2)])},o=[],n={props:{msg:String},data:function(){return{active:0,boolTrue:!0}},created:function(){}},i=n,l=(a("521e"),a("2877")),s=Object(l["a"])(i,t,o,!1,null,"5dfa2afe",null);r["a"]=s.exports},"51a6":function(e,r,a){},"521e":function(e,r,a){"use strict";var t=a("51a6"),o=a.n(t);o.a},"733d":function(e,r,a){},8321:function(e,r,a){"use strict";a.r(r);var t=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("div",{staticClass:"transfer"},[a("m-header",[a("i",{staticClass:"leftBox iconfont iconfont-left-arrow",on:{click:e.back}}),a("div",{staticClass:"text"},[e._v(" 担保交易矿石 ")]),a("i",{staticClass:"rightBox icon"})]),a("div",{staticClass:"transferPage"},[a("div",{staticClass:"placeholderLine10"}),a("div",{staticClass:"paddingWing tip4model3"},[e._v("当前拥有"),a("br"),e._v("矿石:"+e._s(e.userInfo.thisWeekMineral.toFixed(2))+"个 帮扶券:"+e._s(e.userInfo.platformTicket.toFixed(2))+"个")]),a("van-cell-group",[a("van-field",{attrs:{required:"",clearable:"",label:"转让数量",placeholder:"请填写转让数量","error-message":e.errorInfo4AppointDeal.transferAmount},on:{blur:function(r){return e.validate4AppointDeal("transferAmount")}},model:{value:e.form4AppointDeal.transferAmount,callback:function(r){e.$set(e.form4AppointDeal,"transferAmount",r)},expression:"form4AppointDeal.transferAmount"}}),a("van-field",{attrs:{required:"",disabled:"",label:"指导单价"},model:{value:e.curerntPlatformPrice,callback:function(r){e.curerntPlatformPrice=r},expression:"curerntPlatformPrice"}}),a("van-field",{attrs:{required:"",disabled:"",label:"指导总价"},model:{value:e.getGuidancePrice,callback:function(r){e.getGuidancePrice=r},expression:"getGuidancePrice"}}),a("van-field",{attrs:{required:"",clearable:"",label:"担保单价",placeholder:"请填写协商好的卖出单价","error-message":e.errorInfo4AppointDeal.price},on:{blur:function(r){return e.validate4AppointDeal("price")}},model:{value:e.form4AppointDeal.price,callback:function(r){e.$set(e.form4AppointDeal,"price",r)},expression:"form4AppointDeal.price"}}),a("van-field",{attrs:{required:"",clearable:"",label:"担保总价",placeholder:"请先填写转让单价","error-message":e.errorInfo4AppointDeal.assurePrice},on:{blur:function(r){return e.validate4AppointDeal("assurePrice")}},model:{value:e.getAssurePrice,callback:function(r){e.getAssurePrice=r},expression:"getAssurePrice"}}),a("van-field",{attrs:{required:"",clearable:"",label:"区块地址",placeholder:"请粘贴买方的区块地址",maxlength:"36","error-message":e.errorInfo4AppointDeal.blockAddress},on:{blur:function(r){return e.validate4AppointDeal("blockAddress")}},model:{value:e.form4AppointDeal.blockAddress,callback:function(r){e.$set(e.form4AppointDeal,"blockAddress",r)},expression:"form4AppointDeal.blockAddress"}}),a("van-field",{attrs:{required:"",clearable:"",label:"担保代理",placeholder:"请填写代理手机号",maxlength:"11","error-message":e.errorInfo4AppointDeal.agentPhone},on:{blur:function(r){return e.validate4AppointDeal("agentPhone")}},model:{value:e.form4AppointDeal.agentPhone,callback:function(r){e.$set(e.form4AppointDeal,"agentPhone",r)},expression:"form4AppointDeal.agentPhone"}}),a("van-field",{attrs:{required:"",type:"password",clearable:"",label:"安全密码","error-message":e.errorInfo4AppointDeal.safePassword,placeholder:"请填写安全密码"},on:{blur:function(r){return e.validate4AppointDeal("safePassword")}},model:{value:e.form4AppointDeal.safePassword,callback:function(r){e.$set(e.form4AppointDeal,"safePassword",r)},expression:"form4AppointDeal.safePassword"}})],1),a("div",{staticClass:"placeholderLine10"}),a("div",{staticClass:"paddingWing tip4model3",domProps:{innerHTML:e._s(e.$api.tipText4Safe)}}),a("div",{staticClass:"placeholderLine10"}),e._m(0),a("div",{staticClass:"margT10 paddingWing tip4model3",domProps:{innerHTML:e._s(e.tipText4AppointDeal)}}),a("div",{staticClass:"placeholderLine40"}),a("div",{staticClass:"placeholderLine40"}),a("div",{staticClass:"sureBtn"},[a("div",{staticClass:"placeholderLine4"}),a("van-button",{attrs:{color:"linear-gradient(to right, #ffae00, #ff8400)",loading:e.loading,size:"large"},on:{click:e.submit}},[e._v("提 交")])],1)],1)],1)},o=[function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("div",{staticClass:"paddingWing tip4model3"},[a("b",{staticClass:"textBold"},[e._v("点对点(定向)交易规则：")]),a("br"),e._v(" 1.服务费收20%矿石。"),a("br"),e._v(" 2.完成【我的--任务中心】里的基础任务后即可开通定向转让矿石的权限。"),a("br"),e._v(" 3.交易后所剩矿石数不得少于2个，注册所赠送的2个矿石只能用来复投矿机。"),a("br")])}],n=(a("b680"),a("acd8"),a("ac1f"),a("5319"),a("0418")),i=a("2241"),l={data:function(){return{showTipModel:!1,form4AppointDeal:{transferAmount:"",price:"",assurePrice:"",blockAddress:"",safePassword:"",agentPhone:""},errorInfo4AppointDeal:{transferAmount:"",price:"",assurePrice:"",blockAddress:"",safePassword:"",agentPhone:""},option1:[{text:"问题反馈",value:0},{text:"意见建议",value:1},{text:"我要告状",value:2},{text:"其他类型",value:3}],currentPage:1,pageCount:1e3,totalItems:1e4,userId:"",loading:!1,maxPrice:"",userInfo:"",curerntPlatformPrice:"",tipText4AppointDeal:"",guidancePrice:""}},components:{mHeader:n["a"]},computed:{getGuidancePrice:function(){var e=this,r=e.form4AppointDeal.transferAmount*e.curerntPlatformPrice;return e.guidancePrice=r.toFixed(2),e.guidancePrice},getAssurePrice:function(){var e=this,r=e.form4AppointDeal.transferAmount*e.form4AppointDeal.price;return e.form4AppointDeal.assurePrice=r.toFixed(2),e.form4AppointDeal.assurePrice}},created:function(){var e=this;e.tipText4AppointDeal=e.$api.tipText4AppointDeal;var r=localStorage.getItem("_USERINFO_");if(!r)return e.$toast(e.$api.loginAgainTipText),void e.$router.replace("login");console.log("userInfo_localStorage"),e.userInfo=JSON.parse(r),e.userId=e.userInfo.userId,e.getDealPageInfo()},methods:{back:function(){this.$router.go(-1)},getDealPageInfo:function(){var e=this;e.$ajax.ajax(e.$api.getDealPageInfo,"POST",null,(function(r){console.log("getDealPageInfo",r),r.code==e.$api.CODE_OK&&(e.curerntPlatformPrice=r.data.currentPlatformPrice,e.maxPrice=(1.3*parseFloat(r.data.currentPlatformPrice)+4).toFixed(2))}))},validate4AppointDeal:function(e){var r=this;"transferAmount"==e?r.form4AppointDeal[e]>=1&&r.form4AppointDeal[e]<=1e4?r.errorInfo4AppointDeal.transferAmount="":r.errorInfo4AppointDeal.transferAmount="单次转让数量在1~10000之间":"price"==e?r.form4AppointDeal[e]>=.1&&r.form4AppointDeal[e]<=r.maxPrice?r.errorInfo4AppointDeal.price="":r.errorInfo4AppointDeal.price="定向交易价格暂时控制在0.1~".concat(r.maxPrice,"CNY"):"assurePrice"==e?r.form4AppointDeal[e]>=.1&&r.form4AppointDeal[e]<=1e6?r.errorInfo4AppointDeal.assurePrice="":r.errorInfo4AppointDeal.assurePrice="担保金额暂时控制在0.1~1000000":"blockAddress"==e?r.$reg.block_address.test(r.form4AppointDeal[e])?r.errorInfo4AppointDeal.blockAddress="":r.errorInfo4AppointDeal.blockAddress="请正确粘贴对方的区块地址":"safePassword"==e?r.$reg.safePassword.test(r.form4AppointDeal[e])?r.errorInfo4AppointDeal.safePassword="":r.errorInfo4AppointDeal.safePassword="安全密码不超过20位，由'字母或数字或._'组成":"agentPhone"==e&&(r.$reg.phone.test(r.form4AppointDeal[e])?r.errorInfo4AppointDeal.agentPhone="":r.errorInfo4AppointDeal.agentPhone="请正确填写11位手机号码")},submit:function(){console.log("submit");var e=this;if(e.$utils.getTimeHMS(new Date)>"21:00:00")i["a"].alert({title:"系统提示",message:"交易时间是9~21点，请明天再来"}).then((function(){}));else if(e.$utils.getTimeHMS(new Date)>"00:00:00"&&e.$utils.getTimeHMS(new Date)<"09:00:00")i["a"].alert({title:"系统提示",message:"交易时间是9~21点，请到点再来"}).then((function(){}));else{var r={num:e.form4AppointDeal.transferAmount,curerntPlatformPrice:e.curerntPlatformPrice,price:e.form4AppointDeal.price,assurePrice:e.form4AppointDeal.assurePrice,blockAddress:e.form4AppointDeal.blockAddress,agentPhone:e.form4AppointDeal.agentPhone,safePassword:e.form4AppointDeal.safePassword};console.log("params",r),e.userInfo.thisWeekMineral<r.num?e.$toast("您的矿石不够"):e.$utils.hasNull(r)?e.$toast("请填写完整信息"):(console.log("_this.errorInfo4BuyBill",e.errorInfo4BuyBill),e.$utils.hasVal(e.errorInfo4AppointDeal)?e.$toast("请按要求填写信息"):(r.safePassword=e.$JsEncrypt.encrypt(e.form4AppointDeal.safePassword),e.loading=!0,e.$ajax.ajax(e.$api.insertTransaction4AppointBill,"POST",r,(function(a){a.code==e.$api.CODE_OK?(e.$cookies.set("isRefreshUserInfo",1,e.$api.cookiesTime),e.$cookies.set("tabName4MyDeal","get",e.$api.cookiesTime),r.agentPhone==localStorage.getItem("mobilePhone")?e.$router.push({path:"myDeal",query:{dealType:1,isSelf:1,mobilePhone:a.data.mobilePhone,num:r.num}}):e.$router.push({path:"myDeal",query:{dealType:1,mobilePhone:r.agentPhone,num:r.num}}),e.$utils.formClear(e.form4AppointDeal)):i["a"].alert({title:"系统提示",message:a.message}).then((function(){}))}),(function(){e.loading=!1}))))}}}},s=l,p=(a("832f"),a("2877")),c=Object(p["a"])(s,t,o,!1,null,null,null);r["default"]=c.exports},"832f":function(e,r,a){"use strict";var t=a("733d"),o=a.n(t);o.a}}]);